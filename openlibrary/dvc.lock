schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-openlib -m author ../data/ol_dump_authors.txt.gz
    deps:
    - path: ../data/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/bin/scan-openlib/
      md5: c66803e3dbde9a0b9372362690824444.dir
      size: 10748
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: c380afae0b1aec42d7fbc1fd25097d00
      size: 126446479
    - path: authors.parquet
      md5: f14c4a9e4814959b7cb09247ee0d935b
      size: 137229603
  scan-editions:
    cmd: python ../run.py --rust scan-openlib -m edition ../data/ol_dump_editions.txt.gz
    deps:
    - path: ../data/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/bin/scan-openlib/
      md5: c66803e3dbde9a0b9372362690824444.dir
      size: 10748
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 376f44c4eb5a0dc906d4984f80ecde1e
      size: 53258212
    - path: authors.parquet
      md5: f14c4a9e4814959b7cb09247ee0d935b
      size: 137229603
    - path: works.parquet
      md5: a3b778b8bb11ca1f7be5e652ab2f2253
      size: 521741875
    outs:
    - path: all-authors.parquet
      md5: b638a479c5273c4eaf74755142644684
      size: 54577850
    - path: all-works.parquet
      md5: afcf8b373b68927906b0b419f7917bb5
      size: 147844776
    - path: edition-authors.parquet
      md5: 06d076cd39843ef8daeb4204f4d2fc2b
      size: 136280190
    - path: edition-isbns.parquet
      md5: 5538527022436ea7e99d9dfd22895028
      size: 132775401
    - path: edition-works.parquet
      md5: 53b2411bb98c5f37f51d3e23b2b6e876
      size: 146525245
    - path: editions.parquet
      md5: 14711ccac136c604e043cadf803cad7e
      size: 725126663
  scan-works:
    cmd: python ../run.py --rust scan-openlib -m work ../data/ol_dump_works.txt.gz
    deps:
    - path: ../data/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/bin/scan-openlib/
      md5: c66803e3dbde9a0b9372362690824444.dir
      size: 10748
      nfiles: 5
    - path: authors.parquet
      md5: f14c4a9e4814959b7cb09247ee0d935b
      size: 137229603
    outs:
    - path: author-ids-after-works.parquet
      md5: 376f44c4eb5a0dc906d4984f80ecde1e
      size: 53258212
    - path: work-authors.parquet
      md5: 035a984d43b15f9a1b93782d7ddada4f
      size: 110117090
    - path: works.parquet
      md5: a3b778b8bb11ca1f7be5e652ab2f2253
      size: 521741875
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: c3b298952b9b06b3aa52bccc89787fca
      size: 253051496
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: 5538527022436ea7e99d9dfd22895028
      size: 132775401
    outs:
    - path: edition-isbn-ids.parquet
      md5: 60f1ce1f3cf9ad7819aaaab6f5d33956
      size: 155268879
