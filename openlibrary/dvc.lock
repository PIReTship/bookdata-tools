schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-openlib -m author ../data/ol_dump_authors.txt.gz
    deps:
    - path: ../data/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/bin/scan-openlib/
      md5: 0d1fbde429dcd8f87c5f346a1f10194a.dir
      size: 10537
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: 1396172ca8687d7bb4934914591a653d
      size: 141987553
    - path: authors.parquet
      md5: ae3d5f0b8afe8c2f4313dceb9f94eec2
      size: 142822783
  scan-editions:
    cmd: python ../run.py --rust scan-openlib -m edition ../data/ol_dump_editions.txt.gz
    deps:
    - path: ../data/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/bin/scan-openlib/
      md5: 0d1fbde429dcd8f87c5f346a1f10194a.dir
      size: 10537
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 37a4b904dc248fdec461de8e15c93e6a
      size: 58120584
    - path: authors.parquet
      md5: ae3d5f0b8afe8c2f4313dceb9f94eec2
      size: 142822783
    - path: works.parquet
      md5: a2dcc34978440a9a9d574c7d2a696241
      size: 104359151
    outs:
    - path: all-authors.parquet
      md5: 21dc9a76f786d0d4fe74146bccd77bc1
      size: 59819202
    - path: all-works.parquet
      md5: 0c63b9ca6e77c684d6916ac75d939e77
      size: 160430212
    - path: edition-authors.parquet
      md5: b073f79aa7818b502231ce195d917721
      size: 164027959
    - path: edition-isbns.parquet
      md5: 5f0cfe2b912d5c3427c6e5145a4de618
      size: 163883427
    - path: edition-works.parquet
      md5: 47a69f3ae12c330d321297e00e5d6efa
      size: 175549574
    - path: editions.parquet
      md5: 0cdeae4d581a4c7c04db4b41a8e1106c
      size: 148809247
  scan-works:
    cmd: python ../run.py --rust scan-openlib -m work ../data/ol_dump_works.txt.gz
    deps:
    - path: ../data/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/bin/scan-openlib/
      md5: 0d1fbde429dcd8f87c5f346a1f10194a.dir
      size: 10537
      nfiles: 5
    - path: authors.parquet
      md5: ae3d5f0b8afe8c2f4313dceb9f94eec2
      size: 142822783
    outs:
    - path: author-ids-after-works.parquet
      md5: 37a4b904dc248fdec461de8e15c93e6a
      size: 58120584
    - path: work-authors.parquet
      md5: 5f631d42bca0e98e37921875d7cc1609
      size: 133152431
    - path: works.parquet
      md5: a2dcc34978440a9a9d574c7d2a696241
      size: 104359151
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 6e3981bc8feeb857d10cbb8984cc67d9
      size: 152341829
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: 5f0cfe2b912d5c3427c6e5145a4de618
      size: 163883427
    outs:
    - path: edition-isbn-ids.parquet
      md5: 16f8fc4d8790e2667015b5915e4efc86
      size: 215817740
