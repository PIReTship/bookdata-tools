schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: d29e6e8811a215e43e95ee92b9b08e6b
      size: 430740681
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1809
    - path: ../src/openlib/
      md5: 58ecfaf5221925a150ee589d0b11b401.dir
      size: 12937
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: bf6b7ed566d875c1659453bf663211d4
      size: 166418847
    - path: authors.parquet
      md5: 3b656c0e0d7be901a140a8128df77ecd
      size: 193288965
  scan-editions:
    cmd: python ../run.py --rust openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: a1bec0711d017789c45f068430debbee
      size: 7771713448
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1809
    - path: ../src/openlib/
      md5: 58ecfaf5221925a150ee589d0b11b401.dir
      size: 12937
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: bf6efb4bdf0ded21768c59d65675b32e
      size: 72145645
    - path: authors.parquet
      md5: 3b656c0e0d7be901a140a8128df77ecd
      size: 193288965
    - path: works.parquet
      md5: b1f40d2e8f42ad0b9ffabb475314df95
      size: 731264886
    outs:
    - path: all-authors.parquet
      md5: 935ad2a1afe5bd5ed9ca65c70b06e465
      size: 72161071
    - path: all-works.parquet
      md5: cb67188408808220b15ff5c06f2a5daf
      size: 199519828
    - path: edition-authors.parquet
      md5: 50c1e7b2546c4f84b6e3d46892cf9cbb
      size: 195230721
    - path: edition-isbns.parquet
      md5: 4294e568cbdb63f65b3f3e8104a8b378
      size: 199068181
    - path: edition-subjects.parquet
      md5: 6042a6566bd0f4acc0441d543b968721
      size: 601757227
    - path: edition-works.parquet
      md5: 46a91309fe45045063c153c77c65347a
      size: 203829866
    - path: editions.parquet
      md5: 2776a6fc1bccffcac68431d06414c620
      size: 980200581
  scan-works:
    cmd: python ../run.py --rust openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 6ce3e136b51768cffd0bcb7e0b8c8b11
      size: 2397066368
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1809
    - path: ../src/openlib/
      md5: 58ecfaf5221925a150ee589d0b11b401.dir
      size: 12937
      nfiles: 5
    - path: authors.parquet
      md5: 3b656c0e0d7be901a140a8128df77ecd
      size: 193288965
    outs:
    - path: author-ids-after-works.parquet
      md5: bf6efb4bdf0ded21768c59d65675b32e
      size: 72145645
    - path: work-authors.parquet
      md5: d1a6598495b489a27d480dd062edd66c
      size: 155369206
    - path: work-subjects.parquet
      md5: 422bfd423d2b7559a33c2167f5d5dcd0
      size: 357020094
    - path: works.parquet
      md5: b1f40d2e8f42ad0b9ffabb475314df95
      size: 731264886
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: d8369e4b05d4a7de9a8633c05a02012e
      size: 193645280
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: 4aae4d3eaf2ff663d71b9965ccf59133
      size: 132821740
    outs:
    - path: edition-isbn-ids.parquet
      md5: 748d90edfb1dfc4a98bf08f72fe1334a
      size: 134121883
  schema@edition-isbn-ids:
    cmd: python ../run.py --rust pq-info -o edition-isbn-ids.json edition-isbn-ids.parquet
    deps:
    - path: edition-isbn-ids.parquet
      md5: 748d90edfb1dfc4a98bf08f72fe1334a
      size: 134121883
    outs:
    - path: edition-isbn-ids.json
      md5: 16e1f4759a8852bd090963028909826c
      size: 355
  schema@works:
    cmd: python ../run.py --rust pq-info -o works.json works.parquet
    deps:
    - path: works.parquet
      md5: 0b3b554a640a13697089feb9d0b8c509
      size: 520931169
    outs:
    - path: works.json
      md5: 3e293095cf0b7f0697cea06aab5ccfdb
      size: 483
  schema@all-works:
    cmd: python ../run.py --rust pq-info -o all-works.json all-works.parquet
    deps:
    - path: all-works.parquet
      md5: 43534d6324f0021769fdd8ed3287c48b
      size: 147842482
    outs:
    - path: all-works.json
      md5: e94f61a362e300b8a7c65ad2a26ed24d
      size: 345
  schema@editions:
    cmd: python ../run.py --rust pq-info -o editions.json editions.parquet
    deps:
    - path: editions.parquet
      md5: 48972480e58c663c3feff6e3d698c2ba
      size: 723946186
    outs:
    - path: editions.json
      md5: 3050dc7e9f8a8d1d2a6913d1691afb3d
      size: 483
  schema@work-authors:
    cmd: python ../run.py --rust pq-info -o work-authors.json work-authors.parquet
    deps:
    - path: work-authors.parquet
      md5: 8084752354258af9ec4c62fe24764b7f
      size: 110065483
    outs:
    - path: work-authors.json
      md5: 8f577e723cab81055c2217ef91c3f818
      size: 487
  schema@author-names:
    cmd: python ../run.py --rust pq-info -o author-names.json author-names.parquet
    deps:
    - path: author-names.parquet
      md5: bbe41b19f31882eb0128142b351cc077
      size: 126448846
    outs:
    - path: author-names.json
      md5: 4d24bb1eb561ebed36700c491b79b617
      size: 487
  schema@edition-authors:
    cmd: python ../run.py --rust pq-info -o edition-authors.json edition-authors.parquet
    deps:
    - path: edition-authors.parquet
      md5: 52d351f649c6cce481da4b4df6393940
      size: 136280002
    outs:
    - path: edition-authors.json
      md5: e0d0267072e94376707bdb4f2f183f75
      size: 492
  schema@edition-isbns:
    cmd: python ../run.py --rust pq-info -o edition-isbns.json edition-isbns.parquet
    deps:
    - path: edition-isbns.parquet
      md5: 4aae4d3eaf2ff663d71b9965ccf59133
      size: 132821740
    outs:
    - path: edition-isbns.json
      md5: 3ff89b24df48e700eb66d2714ef92378
      size: 351
  schema@edition-works:
    cmd: python ../run.py --rust pq-info -o edition-works.json edition-works.parquet
    deps:
    - path: edition-works.parquet
      md5: 295d170711290ac99b92e60e179bcf7f
      size: 146555043
    outs:
    - path: edition-works.json
      md5: af623428eea7d2b3f88f1c235baf8012
      size: 352
  schema@all-authors:
    cmd: python ../run.py --rust pq-info -o all-authors.json all-authors.parquet
    deps:
    - path: all-authors.parquet
      md5: e7ee0593c3bbdfb8ec1ff3466084f77f
      size: 54577902
    outs:
    - path: all-authors.json
      md5: e0586bd29b2cee34720bf0ce462b3e06
      size: 343
  schema@authors:
    cmd: python ../run.py --rust pq-info -o authors.json authors.parquet
    deps:
    - path: authors.parquet
      md5: a7a63a22986e56ed079110637002e9cc
      size: 136995072
    outs:
    - path: authors.json
      md5: e738a0b4bc862bd74cc123e319233c10
      size: 481
