schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-openlib -m author ../data/ol_dump_authors.txt.gz
    deps:
    - path: ../data/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/bin/scan-openlib/
      md5: 0d1fbde429dcd8f87c5f346a1f10194a.dir
      size: 10537
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: c898edae916f07fe90fce8c6e2e7c2b0
      size: 141892030
    - path: authors.parquet
      md5: b2823941e1b75020d1a17d3d0dcff3d6
      size: 142770080
  scan-editions:
    cmd: python ../run.py --rust scan-openlib -m edition ../data/ol_dump_editions.txt.gz
    deps:
    - path: ../data/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/bin/scan-openlib/
      md5: 0d1fbde429dcd8f87c5f346a1f10194a.dir
      size: 10537
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 555b41de9ae13de72e1069e6d51c20d1
      size: 58121120
    - path: authors.parquet
      md5: b2823941e1b75020d1a17d3d0dcff3d6
      size: 142770080
    - path: works.parquet
      md5: 88b399df90ea30629b7613966786c948
      size: 104359875
    outs:
    - path: all-authors.parquet
      md5: 8f4fb4e59799011a000465e4b75bfbec
      size: 59818589
    - path: all-works.parquet
      md5: 5b9ee7b6fc4af8469a9d38f2b53b7335
      size: 160433515
    - path: edition-authors.parquet
      md5: f4ecbe271442d4834b06c5cc0f2b5feb
      size: 164027959
    - path: edition-isbns.parquet
      md5: cb17120e48b9787ed7be87f22fb250c8
      size: 163872537
    - path: edition-works.parquet
      md5: 5d70449a2c8c89dc050e2e6327855d28
      size: 175549574
    - path: editions.parquet
      md5: f96cd8279796a4ab0918b293a6affa71
      size: 148811683
  scan-works:
    cmd: python ../run.py --rust scan-openlib -m work ../data/ol_dump_works.txt.gz
    deps:
    - path: ../data/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/bin/scan-openlib/
      md5: 0d1fbde429dcd8f87c5f346a1f10194a.dir
      size: 10537
      nfiles: 5
    - path: authors.parquet
      md5: b2823941e1b75020d1a17d3d0dcff3d6
      size: 142770080
    outs:
    - path: author-ids-after-works.parquet
      md5: 555b41de9ae13de72e1069e6d51c20d1
      size: 58121120
    - path: work-authors.parquet
      md5: 94e284a755086b956b2fa5effcc58999
      size: 133152431
    - path: works.parquet
      md5: 88b399df90ea30629b7613966786c948
      size: 104359875
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 10af4e0a7f7c5a000257c00bc0a05c33
      size: 151844823
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: cb17120e48b9787ed7be87f22fb250c8
      size: 163872537
    outs:
    - path: edition-isbn-ids.parquet
      md5: 8dcb8406a2bda68f1eb5468446012665
      size: 214094411
