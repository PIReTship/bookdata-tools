schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: d29e6e8811a215e43e95ee92b9b08e6b
      size: 430740681
    - path: ../src/cli/openlib.rs
      md5: 96839dfb7b56077f06e8a99b2829b7bf
      size: 1840
    - path: ../src/openlib/
      md5: 8e33ec7134e967d7b2808e3befb471d9.dir
      size: 12456
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: 2faef21585860b0880c540ff9625d2bb
      size: 163743071
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
  scan-editions:
    cmd: python ../run.py --rust openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: a1bec0711d017789c45f068430debbee
      size: 7771713448
    - path: ../src/cli/openlib.rs
      md5: 96839dfb7b56077f06e8a99b2829b7bf
      size: 1840
    - path: ../src/openlib/
      md5: 8e33ec7134e967d7b2808e3befb471d9.dir
      size: 12456
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: d13555e9c2f11fb37c073595b9fd65b6
      size: 72146704
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
    - path: works.parquet
      md5: 53ada5a8ed1b3902fb663fe1b1df74a7
      size: 731264887
    outs:
    - path: all-authors.parquet
      md5: 9169eaa6c88c27c250dd632c8260ffb6
      size: 72161766
    - path: all-works.parquet
      md5: 9efbf40bbf02e5288c8d748361e8ab83
      size: 199516075
    - path: edition-authors.parquet
      md5: b510eec2ad6e88005821418e9ebc88ae
      size: 195230722
    - path: edition-isbns.parquet
      md5: 0e76c64885ccfb83ad440fedaec3346e
      size: 199068182
    - path: edition-subjects.parquet
      md5: d85a328f881435f75b748e8581cae77a
      size: 601757228
    - path: edition-works.parquet
      md5: 42b4e843a62bcdf25b43500d76a51d63
      size: 203829867
    - path: editions.parquet
      md5: 2dfe44c47096a8eaa68b8f1c0dc3c855
      size: 980200582
  scan-works:
    cmd: python ../run.py --rust openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 6ce3e136b51768cffd0bcb7e0b8c8b11
      size: 2397066368
    - path: ../src/cli/openlib.rs
      md5: 96839dfb7b56077f06e8a99b2829b7bf
      size: 1840
    - path: ../src/openlib/
      md5: 8e33ec7134e967d7b2808e3befb471d9.dir
      size: 12456
      nfiles: 5
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
    outs:
    - path: author-ids-after-works.parquet
      md5: d13555e9c2f11fb37c073595b9fd65b6
      size: 72146704
    - path: work-authors.parquet
      md5: e50747ff049dd54a717775a28c52cf80
      size: 155369207
    - path: work-subjects.parquet
      md5: 296c7dd1adc631b84efa237c144c268a
      size: 357020095
    - path: works.parquet
      md5: 53ada5a8ed1b3902fb663fe1b1df74a7
      size: 731264887
  edition-isbn-ids:
    cmd: python ../run.py edition-isbn-ids.py
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: f0b746d69f8beb9d099180a62e12531f
      size: 253341052
    - path: edition-isbn-ids.py
      md5: b835f20d9c1a5d777bbe50b3d0c7b4d3
      size: 1049
    - path: edition-isbns.parquet
      md5: 0e76c64885ccfb83ad440fedaec3346e
      size: 199068182
    outs:
    - path: edition-isbn-ids.parquet
      md5: 38fefd89a1b94be3a03fd10b01649e1b
      size: 223512186
  schema@edition-isbn-ids:
    cmd: python ../run.py --rust pq-info -o edition-isbn-ids.json edition-isbn-ids.parquet
    deps:
    - path: edition-isbn-ids.parquet
      md5: c8fbf36e12cf633f1d53e427715ab58e
      size: 200122567
    outs:
    - path: edition-isbn-ids.json
      md5: 2fadeffa54b469825cb9c0c4d2e2f3f7
      size: 355
  schema@works:
    cmd: python ../run.py --rust pq-info -o works.json works.parquet
    deps:
    - path: works.parquet
      md5: 53ada5a8ed1b3902fb663fe1b1df74a7
      size: 731264887
    outs:
    - path: works.json
      md5: 254793dc9928dcd5361bf0c100b7ceaa
      size: 483
  schema@all-works:
    cmd: python ../run.py --rust pq-info -o all-works.json all-works.parquet
    deps:
    - path: all-works.parquet
      md5: 9efbf40bbf02e5288c8d748361e8ab83
      size: 199516075
    outs:
    - path: all-works.json
      md5: 361dc92a3ae3eb8726f88ad8e24b8a57
      size: 345
  schema@editions:
    cmd: python ../run.py --rust pq-info -o editions.json editions.parquet
    deps:
    - path: editions.parquet
      md5: 2dfe44c47096a8eaa68b8f1c0dc3c855
      size: 980200582
    outs:
    - path: editions.json
      md5: c9f66e992216c3eaa46d32e8e859809f
      size: 483
  schema@work-authors:
    cmd: python ../run.py --rust pq-info -o work-authors.json work-authors.parquet
    deps:
    - path: work-authors.parquet
      md5: e50747ff049dd54a717775a28c52cf80
      size: 155369207
    outs:
    - path: work-authors.json
      md5: 01d5f791e1c68d0d7580921e62b608bb
      size: 487
  schema@author-names:
    cmd: python ../run.py --rust pq-info -o author-names.json author-names.parquet
    deps:
    - path: author-names.parquet
      md5: 2faef21585860b0880c540ff9625d2bb
      size: 163743071
    outs:
    - path: author-names.json
      md5: 67b5a69bea7cd38ddba70cd3bdb365cc
      size: 487
  schema@edition-authors:
    cmd: python ../run.py --rust pq-info -o edition-authors.json edition-authors.parquet
    deps:
    - path: edition-authors.parquet
      md5: b510eec2ad6e88005821418e9ebc88ae
      size: 195230722
    outs:
    - path: edition-authors.json
      md5: d0b328fdc4e3d05e83fe40bbc2a76cfc
      size: 492
  schema@edition-isbns:
    cmd: python ../run.py --rust pq-info -o edition-isbns.json edition-isbns.parquet
    deps:
    - path: edition-isbns.parquet
      md5: 0e76c64885ccfb83ad440fedaec3346e
      size: 199068182
    outs:
    - path: edition-isbns.json
      md5: 3e34ff35f1b5938eaba011f0ee5ce12c
      size: 351
  schema@edition-works:
    cmd: python ../run.py --rust pq-info -o edition-works.json edition-works.parquet
    deps:
    - path: edition-works.parquet
      md5: 42b4e843a62bcdf25b43500d76a51d63
      size: 203829867
    outs:
    - path: edition-works.json
      md5: 5e108847a8b5d786304ea6ed7736483d
      size: 352
  schema@all-authors:
    cmd: python ../run.py --rust pq-info -o all-authors.json all-authors.parquet
    deps:
    - path: all-authors.parquet
      md5: 9169eaa6c88c27c250dd632c8260ffb6
      size: 72161766
    outs:
    - path: all-authors.json
      md5: 9c8ebdf9e4007db625f5d63e696c8606
      size: 343
  schema@authors:
    cmd: python ../run.py --rust pq-info -o authors.json authors.parquet
    deps:
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
    outs:
    - path: authors.json
      md5: 8b431107ba612b0e88fbf6124c99879d
      size: 481
  schema@work-subjects:
    cmd: python ../run.py --rust pq-info -o work-subjects.json work-subjects.parquet
    deps:
    - path: work-subjects.parquet
      md5: 296c7dd1adc631b84efa237c144c268a
      size: 357020095
    outs:
    - path: work-subjects.json
      md5: 24ba2ca12f0d163effee15da621c20f3
      size: 349
  schema@edition-subjects:
    cmd: python ../run.py --rust pq-info -o edition-subjects.json edition-subjects.parquet
    deps:
    - path: edition-subjects.parquet
      md5: d85a328f881435f75b748e8581cae77a
      size: 601757228
    outs:
    - path: edition-subjects.json
      md5: 359ed514adef2f46cae5009b2ad01ac3
      size: 349
