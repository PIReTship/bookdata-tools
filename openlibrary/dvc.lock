schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: d29e6e8811a215e43e95ee92b9b08e6b
      size: 430740681
    - path: ../src/cli/openlib.rs
      md5: ac2b0d52d93e6865e0d9b322b25f7127
      size: 1860
    - path: ../src/openlib/
      md5: ac94aee1e1d7e70ef36cb41acf22e3de.dir
      size: 12843
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: 1af0e26605c0f6b58b9c881d53633622
      size: 149833187
    - path: authors.parquet
      md5: da91945ac0ec61cd87ced891218ab676
      size: 179288999
  scan-editions:
    cmd: python ../run.py --rust openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: a1bec0711d017789c45f068430debbee
      size: 7771713448
    - path: ../src/cli/openlib.rs
      md5: ac2b0d52d93e6865e0d9b322b25f7127
      size: 1860
    - path: ../src/openlib/
      md5: ac94aee1e1d7e70ef36cb41acf22e3de.dir
      size: 12843
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 455d061be0bfdd5d2d300085965c969c
      size: 69139925
    - path: authors.parquet
      md5: da91945ac0ec61cd87ced891218ab676
      size: 179288999
    - path: works.parquet
      md5: 88ab3700b15672381c0e5f7b029891d8
      size: 662682117
    outs:
    - path: all-authors.parquet
      md5: 5f024bb345e3049d1c9426784692928a
      size: 69155209
    - path: all-works.parquet
      md5: 1b9a3d75dd8a0e4c25176daf864d1ee2
      size: 181910106
    - path: edition-authors.parquet
      md5: 887d3b1709b880338a9e93ecbeb213f6
      size: 193094588
    - path: edition-isbns.parquet
      md5: 01512ce2cc14b72d23b039d132f194f5
      size: 211695542
    - path: edition-subjects.parquet
      md5: 9fef04d9efe7f640462e9a7b454bdda7
      size: 500132074
    - path: edition-works.parquet
      md5: 53632b1fc28f4bc8f0775f5518ec865b
      size: 203821436
    - path: editions.parquet
      md5: bc080214dcb896f99624cb14d13c9706
      size: 887407054
  scan-works:
    cmd: python ../run.py --rust openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 6ce3e136b51768cffd0bcb7e0b8c8b11
      size: 2397066368
    - path: ../src/cli/openlib.rs
      md5: ac2b0d52d93e6865e0d9b322b25f7127
      size: 1860
    - path: ../src/openlib/
      md5: ac94aee1e1d7e70ef36cb41acf22e3de.dir
      size: 12843
      nfiles: 5
    - path: authors.parquet
      md5: da91945ac0ec61cd87ced891218ab676
      size: 179288999
    outs:
    - path: author-ids-after-works.parquet
      md5: 455d061be0bfdd5d2d300085965c969c
      size: 69139925
    - path: work-authors.parquet
      md5: 25387d62102aceb6b7e1e7174f403649
      size: 153751612
    - path: work-subjects.parquet
      md5: 2e0ace66d8661fc7af09c9cfb8300c33
      size: 289616554
    - path: works.parquet
      md5: 88ab3700b15672381c0e5f7b029891d8
      size: 662682117
  edition-isbn-ids:
    cmd: python run.py --rust link-isbn-ids -R edition -o openlibrary/edition-isbn-ids.parquet
      openlibrary/edition-isbns.parquet
    deps:
    - path: book-links/all-isbns.parquet
      md5: f1de86d41234d3b0ea975be3a188a0cc
      size: 275147630
    - path: openlibrary/edition-isbns.parquet
      md5: 01512ce2cc14b72d23b039d132f194f5
      size: 211695542
    outs:
    - path: openlibrary/edition-isbn-ids.parquet
      md5: 41b3c9f8c0daef62b26c4cc6049f69df
      size: 145369776
  schema@edition-isbn-ids:
    cmd: python ../run.py --rust pq-info -o edition-isbn-ids.json edition-isbn-ids.parquet
    deps:
    - path: edition-isbn-ids.parquet
      md5: 41b3c9f8c0daef62b26c4cc6049f69df
      size: 145369776
    outs:
    - path: edition-isbn-ids.json
      md5: 827dca74b99c048363d44079676043b9
      size: 251
  schema@works:
    cmd: python ../run.py --rust pq-info -o works.json works.parquet
    deps:
    - path: works.parquet
      md5: 88ab3700b15672381c0e5f7b029891d8
      size: 662682117
    outs:
    - path: works.json
      md5: 706aca7030101d951bcb0b66b963c86b
      size: 327
  schema@all-works:
    cmd: python ../run.py --rust pq-info -o all-works.json all-works.parquet
    deps:
    - path: all-works.parquet
      md5: 1b9a3d75dd8a0e4c25176daf864d1ee2
      size: 181910106
    outs:
    - path: all-works.json
      md5: c45c3ee516ca84d35a7cd015153007e2
      size: 239
  schema@editions:
    cmd: python ../run.py --rust pq-info -o editions.json editions.parquet
    deps:
    - path: editions.parquet
      md5: bc080214dcb896f99624cb14d13c9706
      size: 887407054
    outs:
    - path: editions.json
      md5: 4dcd48ec4508c167afbc14765ca3eee5
      size: 327
  schema@work-authors:
    cmd: python ../run.py --rust pq-info -o work-authors.json work-authors.parquet
    deps:
    - path: work-authors.parquet
      md5: 25387d62102aceb6b7e1e7174f403649
      size: 153751612
    outs:
    - path: work-authors.json
      md5: 2fdda7889bd40c794eed8fff81e6252f
      size: 331
  schema@author-names:
    cmd: python ../run.py --rust pq-info -o author-names.json author-names.parquet
    deps:
    - path: author-names.parquet
      md5: 1af0e26605c0f6b58b9c881d53633622
      size: 149833187
    outs:
    - path: author-names.json
      md5: 4cce0edb96a3cba9bbaf3fb80cce80b8
      size: 331
  schema@edition-authors:
    cmd: python ../run.py --rust pq-info -o edition-authors.json edition-authors.parquet
    deps:
    - path: edition-authors.parquet
      md5: 887d3b1709b880338a9e93ecbeb213f6
      size: 193094588
    outs:
    - path: edition-authors.json
      md5: 543090377abfe966c7d979b8d39584bb
      size: 336
  schema@edition-isbns:
    cmd: python ../run.py --rust pq-info -o edition-isbns.json edition-isbns.parquet
    deps:
    - path: edition-isbns.parquet
      md5: 01512ce2cc14b72d23b039d132f194f5
      size: 211695542
    outs:
    - path: edition-isbns.json
      md5: cdf9af7ea7b32093db56aa712b0f3524
      size: 247
  schema@edition-works:
    cmd: python ../run.py --rust pq-info -o edition-works.json edition-works.parquet
    deps:
    - path: edition-works.parquet
      md5: 53632b1fc28f4bc8f0775f5518ec865b
      size: 203821436
    outs:
    - path: edition-works.json
      md5: 13393bc08b510c76dad29a2c4eddb086
      size: 248
  schema@all-authors:
    cmd: python ../run.py --rust pq-info -o all-authors.json all-authors.parquet
    deps:
    - path: all-authors.parquet
      md5: 5f024bb345e3049d1c9426784692928a
      size: 69155209
    outs:
    - path: all-authors.json
      md5: a2da52b17a972e97c7f5ac00113114cc
      size: 237
  schema@authors:
    cmd: python ../run.py --rust pq-info -o authors.json authors.parquet
    deps:
    - path: authors.parquet
      md5: da91945ac0ec61cd87ced891218ab676
      size: 179288999
    outs:
    - path: authors.json
      md5: f9031457b89faff9c2b47d288cd92ad2
      size: 325
  schema@work-subjects:
    cmd: python ../run.py --rust pq-info -o work-subjects.json work-subjects.parquet
    deps:
    - path: work-subjects.parquet
      md5: 2e0ace66d8661fc7af09c9cfb8300c33
      size: 289616554
    outs:
    - path: work-subjects.json
      md5: de90e9aa7cbba45569aa8d43d9a93a15
      size: 245
  schema@edition-subjects:
    cmd: python ../run.py --rust pq-info -o edition-subjects.json edition-subjects.parquet
    deps:
    - path: edition-subjects.parquet
      md5: 9fef04d9efe7f640462e9a7b454bdda7
      size: 500132074
    outs:
    - path: edition-subjects.json
      md5: 453a9e5291756a40d9347a1d2371af58
      size: 245
  work-clusters:
    cmd: python run.py --rust cluster extract-books -n work_id -o openlibrary/work-clusters.parquet
      OL-W
    deps:
    - path: book-links/cluster-graph-nodes.parquet
      md5: 3151fdb3f0c19c69a7b4c9f82670cf65
      size: 832829368
    outs:
    - path: openlibrary/work-clusters.parquet
      md5: ff37e4b7fb36f9d4f292f65ad4307d00
      size: 172719910
  schema@work-clusters:
    cmd: python ../run.py --rust pq-info -o work-clusters.json work-clusters.parquet
    deps:
    - path: work-clusters.parquet
      md5: ff37e4b7fb36f9d4f292f65ad4307d00
      size: 172719910
    outs:
    - path: work-clusters.json
      md5: e99e4eaf4d61244087755ee9f897371e
      size: 251
