schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1728
    - path: ../src/openlib/
      md5: cc4d6b7d203f2b03db2a3b1e7466aff9.dir
      size: 10947
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: bbe41b19f31882eb0128142b351cc077
      size: 126448846
    - path: authors.parquet
      md5: a7a63a22986e56ed079110637002e9cc
      size: 136995072
  scan-editions:
    cmd: python ../run.py --rust openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1728
    - path: ../src/openlib/
      md5: cc4d6b7d203f2b03db2a3b1e7466aff9.dir
      size: 10947
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 7470b0bfe14d26c4e2fd4241c41e56ac
      size: 53257918
    - path: authors.parquet
      md5: a7a63a22986e56ed079110637002e9cc
      size: 136995072
    - path: works.parquet
      md5: 0b3b554a640a13697089feb9d0b8c509
      size: 520931169
    outs:
    - path: all-authors.parquet
      md5: e7ee0593c3bbdfb8ec1ff3466084f77f
      size: 54577902
    - path: all-works.parquet
      md5: 43534d6324f0021769fdd8ed3287c48b
      size: 147842482
    - path: edition-authors.parquet
      md5: 52d351f649c6cce481da4b4df6393940
      size: 136280002
    - path: edition-isbns.parquet
      md5: 4aae4d3eaf2ff663d71b9965ccf59133
      size: 132821740
    - path: edition-works.parquet
      md5: 295d170711290ac99b92e60e179bcf7f
      size: 146555043
    - path: editions.parquet
      md5: 48972480e58c663c3feff6e3d698c2ba
      size: 723946186
  scan-works:
    cmd: python ../run.py --rust openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1728
    - path: ../src/openlib/
      md5: cc4d6b7d203f2b03db2a3b1e7466aff9.dir
      size: 10947
      nfiles: 5
    - path: authors.parquet
      md5: a7a63a22986e56ed079110637002e9cc
      size: 136995072
    outs:
    - path: author-ids-after-works.parquet
      md5: 7470b0bfe14d26c4e2fd4241c41e56ac
      size: 53257918
    - path: work-authors.parquet
      md5: 8084752354258af9ec4c62fe24764b7f
      size: 110065483
    - path: works.parquet
      md5: 0b3b554a640a13697089feb9d0b8c509
      size: 520931169
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 29cc7ae0b86b0e0f5aa7389fdea7de5b
      size: 193709539
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: 4aae4d3eaf2ff663d71b9965ccf59133
      size: 132821740
    outs:
    - path: edition-isbn-ids.parquet
      md5: f1bb7e35d883c19e733608ae58d8981b
      size: 127237646
  schema@edition-isbn-ids:
    cmd: python ../run.py --rust pq-info -o edition-isbn-ids.json edition-isbn-ids.parquet
    deps:
    - path: edition-isbn-ids.parquet
      md5: f1bb7e35d883c19e733608ae58d8981b
      size: 127237646
    outs:
    - path: edition-isbn-ids.json
      md5: 8f6b2a901a2e7588628006dcb65573a6
      size: 451
  schema@works:
    cmd: python ../run.py --rust pq-info -o works.json works.parquet
    deps:
    - path: works.parquet
      md5: 0b3b554a640a13697089feb9d0b8c509
      size: 520931169
    outs:
    - path: works.json
      md5: 724a81eb16757d18291d1c29e4839b7f
      size: 522
  schema@all-works:
    cmd: python ../run.py --rust pq-info -o all-works.json all-works.parquet
    deps:
    - path: all-works.parquet
      md5: 43534d6324f0021769fdd8ed3287c48b
      size: 147842482
    outs:
    - path: all-works.json
      md5: 570faaa28ff32a2553bfae82a2982616
      size: 393
  schema@editions:
    cmd: python ../run.py --rust pq-info -o editions.json editions.parquet
    deps:
    - path: editions.parquet
      md5: 48972480e58c663c3feff6e3d698c2ba
      size: 723946186
    outs:
    - path: editions.json
      md5: 1c359576f79422a1ece778fdf8fae52d
      size: 522
  schema@work-authors:
    cmd: python ../run.py --rust pq-info -o work-authors.json work-authors.parquet
    deps:
    - path: work-authors.parquet
      md5: 8084752354258af9ec4c62fe24764b7f
      size: 110065483
    outs:
    - path: work-authors.json
      md5: a88bc0e9b77543856957924b05cfcd87
      size: 622
  schema@author-names:
    cmd: python ../run.py --rust pq-info -o author-names.json author-names.parquet
    deps:
    - path: author-names.parquet
      md5: bbe41b19f31882eb0128142b351cc077
      size: 126448846
    outs:
    - path: author-names.json
      md5: abc6720b7cf29df4a9e26f8b5ff346ce
      size: 574
  schema@edition-authors:
    cmd: python ../run.py --rust pq-info -o edition-authors.json edition-authors.parquet
    deps:
    - path: edition-authors.parquet
      md5: 52d351f649c6cce481da4b4df6393940
      size: 136280002
    outs:
    - path: edition-authors.json
      md5: a57c0fe62b3258da01df80863045a123
      size: 627
  schema@edition-isbns:
    cmd: python ../run.py --rust pq-info -o edition-isbns.json edition-isbns.parquet
    deps:
    - path: edition-isbns.parquet
      md5: 4aae4d3eaf2ff663d71b9965ccf59133
      size: 132821740
    outs:
    - path: edition-isbns.json
      md5: f4cf8d5d1e948dbcf59d1afb74bda446
      size: 399
  schema@edition-works:
    cmd: python ../run.py --rust pq-info -o edition-works.json edition-works.parquet
    deps:
    - path: edition-works.parquet
      md5: 295d170711290ac99b92e60e179bcf7f
      size: 146555043
    outs:
    - path: edition-works.json
      md5: 74050c45a20c93c3115e4be371908eb7
      size: 448
  schema@all-authors:
    cmd: python ../run.py --rust pq-info -o all-authors.json all-authors.parquet
    deps:
    - path: all-authors.parquet
      md5: e7ee0593c3bbdfb8ec1ff3466084f77f
      size: 54577902
    outs:
    - path: all-authors.json
      md5: 772a1d1918348099b3e50371cd78df4f
      size: 391
  schema@authors:
    cmd: python ../run.py --rust pq-info -o authors.json authors.parquet
    deps:
    - path: authors.parquet
      md5: a7a63a22986e56ed079110637002e9cc
      size: 136995072
    outs:
    - path: authors.json
      md5: 6a01d9b5ec24a24769415c8fb039dff7
      size: 520
