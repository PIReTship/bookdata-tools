schema: '2.0'
stages:
  scan-authors:
    cmd: cargo run --release -- openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: d29e6e8811a215e43e95ee92b9b08e6b
      size: 430740681
    - path: ../src/cli/openlib.rs
      md5: dbe8caca3345f0f9ca7f730c2df79f29
      size: 1938
    - path: ../src/openlib/
      md5: 6f6406f060e6c2d35e7736de04ce51af.dir
      size: 13994
      nfiles: 5
    outs:
    - path: author-names.parquet
      hash: md5
      md5: f14d913fd1d139fcd26d3ae34e7392d3
      size: 151081619
    - path: authors.parquet
      hash: md5
      md5: fad9ee4649d11c705dd15086f23a157a
      size: 178808160
  scan-editions:
    cmd: cargo run --release -- openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: a1bec0711d017789c45f068430debbee
      size: 7771713448
    - path: ../src/cli/openlib.rs
      md5: dbe8caca3345f0f9ca7f730c2df79f29
      size: 1938
    - path: ../src/openlib/
      md5: 6f6406f060e6c2d35e7736de04ce51af.dir
      size: 13994
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: e96e13dd6c7244e1a254e58e7c396385
      size: 67082294
    - path: authors.parquet
      hash: md5
      md5: fad9ee4649d11c705dd15086f23a157a
      size: 178808160
    - path: works.parquet
      hash: md5
      md5: 191d9940fe0c6c83518a957c75d4eac9
      size: 663422438
    outs:
    - path: all-authors.parquet
      md5: 632add46e59ff1653d9532ecbc87b851
      size: 67096542
    - path: all-works.parquet
      md5: 832cc1253307df9c7bbe4d83e7e3fa93
      size: 176243794
    - path: edition-authors.parquet
      hash: md5
      md5: f3ae9e0a71daed130ff11e3fcf4122b9
      size: 193584177
    - path: edition-isbns.parquet
      hash: md5
      md5: 6b0e8118e3597a15b2555eeb1f5f19fe
      size: 207849845
    - path: edition-subjects.parquet
      hash: md5
      md5: 165f5523046a098796f96cc2be2d574c
      size: 522800217
    - path: edition-works.parquet
      hash: md5
      md5: 48e2705364b90515bde255a80c5f044c
      size: 203839441
    - path: editions.parquet
      hash: md5
      md5: e3b2637c255a889dbb717c5e4295f99b
      size: 888704794
  scan-works:
    cmd: cargo run --release -- openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 6ce3e136b51768cffd0bcb7e0b8c8b11
      size: 2397066368
    - path: ../src/cli/openlib.rs
      md5: dbe8caca3345f0f9ca7f730c2df79f29
      size: 1938
    - path: ../src/openlib/
      md5: 6f6406f060e6c2d35e7736de04ce51af.dir
      size: 13994
      nfiles: 5
    - path: authors.parquet
      hash: md5
      md5: fad9ee4649d11c705dd15086f23a157a
      size: 178808160
    outs:
    - path: author-ids-after-works.parquet
      md5: e96e13dd6c7244e1a254e58e7c396385
      size: 67082294
    - path: work-authors.parquet
      hash: md5
      md5: 603a22eb40d8b32c63705ef8501b3dfb
      size: 153899196
    - path: work-subjects.parquet
      hash: md5
      md5: b0f8a5e1fa01f7071962d7c169dcfe02
      size: 304767903
    - path: works.parquet
      hash: md5
      md5: 191d9940fe0c6c83518a957c75d4eac9
      size: 663422438
  edition-isbn-ids:
    cmd: cargo run --release -- link-isbn-ids -R edition -o openlibrary/edition-isbn-ids.parquet
      openlibrary/edition-isbns.parquet
    deps:
    - path: book-links/all-isbns.parquet
      hash: md5
      md5: c6135673e76fbc19da4e6deaf740f73a
      size: 270411983
    - path: openlibrary/edition-isbns.parquet
      hash: md5
      md5: 6b0e8118e3597a15b2555eeb1f5f19fe
      size: 207849845
    outs:
    - path: openlibrary/edition-isbn-ids.parquet
      hash: md5
      md5: 98a4649a0501f434286e8b2ed830ac01
      size: 145902421
  schema@edition-isbn-ids:
    cmd: python ../run.py --rust pq-info -o edition-isbn-ids.json edition-isbn-ids.parquet
    deps:
    - path: edition-isbn-ids.parquet
      md5: 6cf6500ebab273315fa90e2f2031dd3b
      size: 145485299
    outs:
    - path: edition-isbn-ids.json
      md5: 0fe837f400c6e7b7d4535b67237af989
      size: 251
  schema@works:
    cmd: python ../run.py --rust pq-info -o works.json works.parquet
    deps:
    - path: works.parquet
      md5: 0392b4f5308bf945efc14d206bb8b9fa
      size: 663422438
    outs:
    - path: works.json
      md5: 5b5e973797c2f0d8aff51c7f6d300fa6
      size: 327
  schema@all-works:
    cmd: python ../run.py --rust pq-info -o all-works.json all-works.parquet
    deps:
    - path: all-works.parquet
      md5: 832cc1253307df9c7bbe4d83e7e3fa93
      size: 176243794
    outs:
    - path: all-works.json
      md5: 1e5228092f43d81e5871c48117be3146
      size: 239
  schema@editions:
    cmd: python ../run.py --rust pq-info -o editions.json editions.parquet
    deps:
    - path: editions.parquet
      md5: b082da165d2b2d9c0fa5489376c8c57a
      size: 888704794
    outs:
    - path: editions.json
      md5: 464dc59fc293103fcbf3e9baa3373c1a
      size: 327
  schema@work-authors:
    cmd: python ../run.py --rust pq-info -o work-authors.json work-authors.parquet
    deps:
    - path: work-authors.parquet
      md5: e62c8dfb5507c4ec67b3e0f7b940523f
      size: 153899196
    outs:
    - path: work-authors.json
      md5: 140a8f1c6dc0ad558bf6ca19e742210f
      size: 331
  schema@author-names:
    cmd: python ../run.py --rust pq-info -o author-names.json author-names.parquet
    deps:
    - path: author-names.parquet
      md5: 76ca0c2e90393598cc71578ffe5493d1
      size: 151081619
    outs:
    - path: author-names.json
      md5: a8b5bf82ca7a88ff7ef58ec4698a0e3a
      size: 331
  schema@edition-authors:
    cmd: python ../run.py --rust pq-info -o edition-authors.json edition-authors.parquet
    deps:
    - path: edition-authors.parquet
      md5: 231cda3e2643ce16e46942a58aa3b57e
      size: 193584177
    outs:
    - path: edition-authors.json
      md5: 4ba99be63216163455443c29e8acafe4
      size: 336
  schema@edition-isbns:
    cmd: python ../run.py --rust pq-info -o edition-isbns.json edition-isbns.parquet
    deps:
    - path: edition-isbns.parquet
      md5: 4e25efdddefdaa656de713a99b0ca2d7
      size: 207849845
    outs:
    - path: edition-isbns.json
      md5: 7f750ebd2dcdfebb39eb49c0cf6948a2
      size: 247
  schema@edition-works:
    cmd: python ../run.py --rust pq-info -o edition-works.json edition-works.parquet
    deps:
    - path: edition-works.parquet
      md5: 9e7de4af3d400505f77235d8f903f826
      size: 203839441
    outs:
    - path: edition-works.json
      md5: d8b6f877272dbc1c7f690a5774ddada8
      size: 248
  schema@all-authors:
    cmd: python ../run.py --rust pq-info -o all-authors.json all-authors.parquet
    deps:
    - path: all-authors.parquet
      md5: 632add46e59ff1653d9532ecbc87b851
      size: 67096542
    outs:
    - path: all-authors.json
      md5: 6921aee9159edf48ca9a733245113f6e
      size: 237
  schema@authors:
    cmd: python ../run.py --rust pq-info -o authors.json authors.parquet
    deps:
    - path: authors.parquet
      md5: c77ceaa2f2cb3f90f514edd561e11398
      size: 178808160
    outs:
    - path: authors.json
      md5: a33ba4a8bb933055f43ec0d933cdebec
      size: 325
  schema@work-subjects:
    cmd: python ../run.py --rust pq-info -o work-subjects.json work-subjects.parquet
    deps:
    - path: work-subjects.parquet
      md5: 273c91a6d0b49f57ae8d10816fb4f5a0
      size: 304767903
    outs:
    - path: work-subjects.json
      md5: 164a92469b9c94c2d99ff5fa8ab27551
      size: 245
  schema@edition-subjects:
    cmd: python ../run.py --rust pq-info -o edition-subjects.json edition-subjects.parquet
    deps:
    - path: edition-subjects.parquet
      md5: d58f4b70cf2a7ebf8d919aa18113d2e2
      size: 522800217
    outs:
    - path: edition-subjects.json
      md5: 04631619a35917b9dd4a850541190b8d
      size: 245
  work-clusters:
    cmd: python run.py --rust cluster extract-books -n work_id -o openlibrary/work-clusters.parquet
      OL-W
    deps:
    - path: book-links/cluster-graph-nodes.parquet
      md5: b3ab34c04781686ced3aeca4f06baaa8
      size: 823859793
    outs:
    - path: openlibrary/work-clusters.parquet
      md5: 82b15db1b6cb8a76cd9526a1770bc8dc
      size: 172722261
  schema@work-clusters:
    cmd: python ../run.py --rust pq-info -o work-clusters.json work-clusters.parquet
    deps:
    - path: work-clusters.parquet
      md5: 82b15db1b6cb8a76cd9526a1770bc8dc
      size: 172722261
    outs:
    - path: work-clusters.json
      md5: 9b31d738006f09d80ffc1e2da748d976
      size: 251
