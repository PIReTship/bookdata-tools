schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-openlib -m author ../data/ol_dump_authors.txt.gz
    deps:
    - path: ../data/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/bin/scan-openlib/
      md5: c66803e3dbde9a0b9372362690824444.dir
      size: 11222
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: c898edae916f07fe90fce8c6e2e7c2b0
      size: 141892030
    - path: authors.parquet
      md5: b2823941e1b75020d1a17d3d0dcff3d6
      size: 142770080
  scan-editions:
    cmd: python ../run.py --rust scan-openlib -m edition ../data/ol_dump_editions.txt.gz
    deps:
    - path: ../data/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/bin/scan-openlib/
      md5: c66803e3dbde9a0b9372362690824444.dir
      size: 11222
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: d1cfa9f4a2809fddd5304066d5beb7fa
      size: 58120367
    - path: authors.parquet
      md5: b2823941e1b75020d1a17d3d0dcff3d6
      size: 142770080
    - path: works.parquet
      md5: 3a60a4e6ab2022cf7ff4571016a31cac
      size: 535251154
    outs:
    - path: all-authors.parquet
      md5: 765ffa718376916ef917b6ce2bcbd7ae
      size: 59816357
    - path: all-works.parquet
      md5: 5961099fcb6ee3b49d4e210e44f8b62a
      size: 160432912
    - path: edition-authors.parquet
      md5: f4ecbe271442d4834b06c5cc0f2b5feb
      size: 164027959
    - path: edition-isbns.parquet
      md5: cb17120e48b9787ed7be87f22fb250c8
      size: 163872537
    - path: edition-works.parquet
      md5: 5d70449a2c8c89dc050e2e6327855d28
      size: 175549574
    - path: editions.parquet
      md5: d03a01afd02656369b105a8d446751bd
      size: 744310457
  scan-works:
    cmd: python ../run.py --rust scan-openlib -m work ../data/ol_dump_works.txt.gz
    deps:
    - path: ../data/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/bin/scan-openlib/
      md5: c66803e3dbde9a0b9372362690824444.dir
      size: 10748
      nfiles: 5
    - path: authors.parquet
      md5: b2823941e1b75020d1a17d3d0dcff3d6
      size: 142770080
    outs:
    - path: author-ids-after-works.parquet
      md5: 9e8fc93dc873ef826a35490e8a3be1a3
      size: 53258074
    - path: work-authors.parquet
      md5: 035a984d43b15f9a1b93782d7ddada4f
      size: 110117090
    - path: works.parquet
      md5: a3b778b8bb11ca1f7be5e652ab2f2253
      size: 521741875
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 5528f328ba4738e3b645949650c33aa8
      size: 262549842
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 207
    - path: edition-isbns.parquet
      md5: cb17120e48b9787ed7be87f22fb250c8
      size: 163872537
    outs:
    - path: edition-isbn-ids.parquet
      md5: 01f91574924cc523562953cc1c64c7e2
      size: 225933880
