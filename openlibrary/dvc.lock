schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: d29e6e8811a215e43e95ee92b9b08e6b
      size: 430740681
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1809
    - path: ../src/openlib/
      md5: 8e33ec7134e967d7b2808e3befb471d9.dir
      size: 12933
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: 289bf26896ced89e06e6afd84bea88be
      size: 163983500
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
  scan-editions:
    cmd: python ../run.py --rust openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: a1bec0711d017789c45f068430debbee
      size: 7771713448
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1809
    - path: ../src/openlib/
      md5: 8e33ec7134e967d7b2808e3befb471d9.dir
      size: 12933
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 977b964fb5c639bd3baa653b9c9ddba6
      size: 72146165
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
    - path: works.parquet
      md5: 53ada5a8ed1b3902fb663fe1b1df74a7
      size: 731264887
    outs:
    - path: all-authors.parquet
      md5: 82b32add912fa083f02a3331934deeff
      size: 72160406
    - path: all-works.parquet
      md5: 620ec2809f8ea24645314f0c3bc4d703
      size: 199521189
    - path: edition-authors.parquet
      md5: b510eec2ad6e88005821418e9ebc88ae
      size: 195230722
    - path: edition-isbns.parquet
      md5: 0e76c64885ccfb83ad440fedaec3346e
      size: 199068182
    - path: edition-subjects.parquet
      md5: d85a328f881435f75b748e8581cae77a
      size: 601757228
    - path: edition-works.parquet
      md5: 42b4e843a62bcdf25b43500d76a51d63
      size: 203829867
    - path: editions.parquet
      md5: 2dfe44c47096a8eaa68b8f1c0dc3c855
      size: 980200582
  scan-works:
    cmd: python ../run.py --rust openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 6ce3e136b51768cffd0bcb7e0b8c8b11
      size: 2397066368
    - path: ../src/cli/openlib.rs
      md5: 5156a840bf850593d05006d3cd2b795d
      size: 1809
    - path: ../src/openlib/
      md5: 8e33ec7134e967d7b2808e3befb471d9.dir
      size: 12933
      nfiles: 5
    - path: authors.parquet
      md5: 9649891caf954d4e806d0a1e9134ab7e
      size: 193288966
    outs:
    - path: author-ids-after-works.parquet
      md5: 977b964fb5c639bd3baa653b9c9ddba6
      size: 72146165
    - path: work-authors.parquet
      md5: e50747ff049dd54a717775a28c52cf80
      size: 155369207
    - path: work-subjects.parquet
      md5: 296c7dd1adc631b84efa237c144c268a
      size: 357020095
    - path: works.parquet
      md5: 53ada5a8ed1b3902fb663fe1b1df74a7
      size: 731264887
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: e2df5fb6396729ea6c1e52140610ee46
      size: 257503194
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: 4294e568cbdb63f65b3f3e8104a8b378
      size: 199068181
    outs:
    - path: edition-isbn-ids.parquet
      md5: 8745d981c292e41f88375b1464a52588
      size: 198069548
  schema@edition-isbn-ids:
    cmd: python ../run.py --rust pq-info -o edition-isbn-ids.json edition-isbn-ids.parquet
    deps:
    - path: edition-isbn-ids.parquet
      md5: 8745d981c292e41f88375b1464a52588
      size: 198069548
    outs:
    - path: edition-isbn-ids.json
      md5: 5c0798d02ed9e539c7aa464eb0179935
      size: 355
  schema@works:
    cmd: python ../run.py --rust pq-info -o works.json works.parquet
    deps:
    - path: works.parquet
      md5: b1f40d2e8f42ad0b9ffabb475314df95
      size: 731264886
    outs:
    - path: works.json
      md5: 7b4bbecc31ed51660de051e9861b06be
      size: 483
  schema@all-works:
    cmd: python ../run.py --rust pq-info -o all-works.json all-works.parquet
    deps:
    - path: all-works.parquet
      md5: cb67188408808220b15ff5c06f2a5daf
      size: 199519828
    outs:
    - path: all-works.json
      md5: e122ca820ad905a98e4ab0e377679a5b
      size: 345
  schema@editions:
    cmd: python ../run.py --rust pq-info -o editions.json editions.parquet
    deps:
    - path: editions.parquet
      md5: 2776a6fc1bccffcac68431d06414c620
      size: 980200581
    outs:
    - path: editions.json
      md5: 63a6d62029502146c4467c469c12f27e
      size: 483
  schema@work-authors:
    cmd: python ../run.py --rust pq-info -o work-authors.json work-authors.parquet
    deps:
    - path: work-authors.parquet
      md5: d1a6598495b489a27d480dd062edd66c
      size: 155369206
    outs:
    - path: work-authors.json
      md5: ee822c61365c639efb8f8226403bda59
      size: 487
  schema@author-names:
    cmd: python ../run.py --rust pq-info -o author-names.json author-names.parquet
    deps:
    - path: author-names.parquet
      md5: bf6b7ed566d875c1659453bf663211d4
      size: 166418847
    outs:
    - path: author-names.json
      md5: 065719a526eecff1d454ec4a47d99e88
      size: 487
  schema@edition-authors:
    cmd: python ../run.py --rust pq-info -o edition-authors.json edition-authors.parquet
    deps:
    - path: edition-authors.parquet
      md5: 50c1e7b2546c4f84b6e3d46892cf9cbb
      size: 195230721
    outs:
    - path: edition-authors.json
      md5: 487fe4c6dea324bd14d0e2092f3ccad9
      size: 492
  schema@edition-isbns:
    cmd: python ../run.py --rust pq-info -o edition-isbns.json edition-isbns.parquet
    deps:
    - path: edition-isbns.parquet
      md5: 4294e568cbdb63f65b3f3e8104a8b378
      size: 199068181
    outs:
    - path: edition-isbns.json
      md5: 6165b9e087e720be8e86349614649a8a
      size: 351
  schema@edition-works:
    cmd: python ../run.py --rust pq-info -o edition-works.json edition-works.parquet
    deps:
    - path: edition-works.parquet
      md5: 42b4e843a62bcdf25b43500d76a51d63
      size: 203829867
    outs:
    - path: edition-works.json
      md5: 5e108847a8b5d786304ea6ed7736483d
      size: 352
  schema@all-authors:
    cmd: python ../run.py --rust pq-info -o all-authors.json all-authors.parquet
    deps:
    - path: all-authors.parquet
      md5: 935ad2a1afe5bd5ed9ca65c70b06e465
      size: 72161071
    outs:
    - path: all-authors.json
      md5: 0cce23dbf25f413a5464c0f489bae9bd
      size: 343
  schema@authors:
    cmd: python ../run.py --rust pq-info -o authors.json authors.parquet
    deps:
    - path: authors.parquet
      md5: 3b656c0e0d7be901a140a8128df77ecd
      size: 193288965
    outs:
    - path: authors.json
      md5: 9a1b06fd0d32ba6dff46ddf20bfa0fa9
      size: 481
  schema@work-subjects:
    cmd: python ../run.py --rust pq-info -o work-subjects.json work-subjects.parquet
    deps:
    - path: work-subjects.parquet
      md5: 422bfd423d2b7559a33c2167f5d5dcd0
      size: 357020094
    outs:
    - path: work-subjects.json
      md5: ef0f6af63565f43e5b7bf84427c7ccae
      size: 349
  schema@edition-subjects:
    cmd: python ../run.py --rust pq-info -o edition-subjects.json edition-subjects.parquet
    deps:
    - path: edition-subjects.parquet
      md5: 6042a6566bd0f4acc0441d543b968721
      size: 601757227
    outs:
    - path: edition-subjects.json
      md5: 97e8f33b09eedd0a32bdca46e5a65f6a
      size: 349
