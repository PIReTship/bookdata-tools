schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust openlib scan-authors ../data/openlib/ol_dump_authors.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/cli/openlib.rs
      md5: 723aded8b9cac7541a5c5cb710c01409
      size: 1752
    - path: ../src/openlib/
      md5: 0cf1462260bd2855f307d3b29ef44811.dir
      size: 10851
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: c380afae0b1aec42d7fbc1fd25097d00
      size: 126446479
    - path: authors.parquet
      md5: f14c4a9e4814959b7cb09247ee0d935b
      size: 137229603
  scan-editions:
    cmd: python ../run.py --rust openlib scan-editions ../data/openlib/ol_dump_editions.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/cli/openlib.rs
      md5: 723aded8b9cac7541a5c5cb710c01409
      size: 1752
    - path: ../src/openlib/
      md5: 0cf1462260bd2855f307d3b29ef44811.dir
      size: 10851
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 99f3264636bc5b22d532c1eab6583ade
      size: 53259144
    - path: authors.parquet
      md5: f14c4a9e4814959b7cb09247ee0d935b
      size: 137229603
    - path: works.parquet
      md5: a3b778b8bb11ca1f7be5e652ab2f2253
      size: 521741875
    outs:
    - path: all-authors.parquet
      md5: 505a45ce13ddf4f5470ce5b69169527b
      size: 54577671
    - path: all-works.parquet
      md5: 1174f0efb6f3f35c10083fb1690f08e2
      size: 147845329
    - path: edition-authors.parquet
      md5: 06d076cd39843ef8daeb4204f4d2fc2b
      size: 136280190
    - path: edition-isbns.parquet
      md5: 5538527022436ea7e99d9dfd22895028
      size: 132775401
    - path: edition-works.parquet
      md5: 53b2411bb98c5f37f51d3e23b2b6e876
      size: 146525245
    - path: editions.parquet
      md5: 14711ccac136c604e043cadf803cad7e
      size: 725126663
  scan-works:
    cmd: python ../run.py --rust openlib scan-works ../data/openlib/ol_dump_works.txt.gz
    deps:
    - path: ../data/openlib/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/cli/openlib.rs
      md5: 723aded8b9cac7541a5c5cb710c01409
      size: 1752
    - path: ../src/openlib/
      md5: 0cf1462260bd2855f307d3b29ef44811.dir
      size: 10851
      nfiles: 5
    - path: authors.parquet
      md5: f14c4a9e4814959b7cb09247ee0d935b
      size: 137229603
    outs:
    - path: author-ids-after-works.parquet
      md5: 99f3264636bc5b22d532c1eab6583ade
      size: 53259144
    - path: work-authors.parquet
      md5: 035a984d43b15f9a1b93782d7ddada4f
      size: 110117090
    - path: works.parquet
      md5: a3b778b8bb11ca1f7be5e652ab2f2253
      size: 521741875
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: d1649b93c97e0624ee756008849ae953
      size: 253047840
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 200
    - path: edition-isbns.parquet
      md5: 5538527022436ea7e99d9dfd22895028
      size: 132775401
    outs:
    - path: edition-isbn-ids.parquet
      md5: f244fa76dbbd1d3fa552255a178ceede
      size: 155409656
