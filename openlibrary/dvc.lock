schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-openlib -m author ../data/ol_dump_authors.txt.gz
    deps:
    - path: ../data/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: ../src/bin/scan-openlib/
      md5: 491cdf786761f2dfd7e5820ff9552aa4.dir
      size: 10849
      nfiles: 5
    outs:
    - path: author-names.parquet
      md5: 4e002793c585a769fc1334827697837e
      size: 142462847
    - path: authors.parquet
      md5: 21e62e653f13c734de0bccccbf03e184
      size: 143351540
  scan-editions:
    cmd: python ../run.py --rust scan-openlib -m edition ../data/ol_dump_editions.txt.gz
    deps:
    - path: ../data/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: ../src/bin/scan-openlib/
      md5: 491cdf786761f2dfd7e5820ff9552aa4.dir
      size: 10849
      nfiles: 5
    - path: author-ids-after-works.parquet
      md5: 643570a30d5cbf4068e1c474dbea4f74
      size: 58118490
    - path: authors.parquet
      md5: 21e62e653f13c734de0bccccbf03e184
      size: 143351540
    - path: works.parquet
      md5: c4b9f926bb0d395cfb1fbc7e0f9217e2
      size: 104359151
    outs:
    - path: all-authors.parquet
      md5: 7334153dfa9856d4d28b67f12b001df3
      size: 59817104
    - path: all-works.parquet
      md5: cf41b00796005d9805f5aa4128094534
      size: 160431445
    - path: edition-authors.parquet
      md5: 7172b92182942d728830cdac0b4862b6
      size: 164027959
    - path: edition-isbns.parquet
      md5: ffe6f2bd530fa0a96700d50c6f53a64b
      size: 163883427
    - path: edition-works.parquet
      md5: 5b8e6e6c1ddfd94a0a05e9e9bca88442
      size: 175549574
    - path: editions.parquet
      md5: f922a1e9608f641341a48d840679656f
      size: 148809247
  scan-works:
    cmd: python ../run.py --rust scan-openlib -m work ../data/ol_dump_works.txt.gz
    deps:
    - path: ../data/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: ../src/bin/scan-openlib/
      md5: 491cdf786761f2dfd7e5820ff9552aa4.dir
      size: 10849
      nfiles: 5
    - path: authors.parquet
      md5: 21e62e653f13c734de0bccccbf03e184
      size: 143351540
    outs:
    - path: author-ids-after-works.parquet
      md5: 643570a30d5cbf4068e1c474dbea4f74
      size: 58118490
    - path: work-authors.parquet
      md5: 78a6fe696e8a14685a584452e7ebc7f3
      size: 133152431
    - path: works.parquet
      md5: c4b9f926bb0d395cfb1fbc7e0f9217e2
      size: 104359151
  edition-isbn-ids:
    cmd: python ../run.py --rust fusion edition-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 56ef5f842af3651da12b632886432122
      size: 152341832
    - path: edition-isbn-ids.tcl
      md5: 68869c0bf2dfde39bf8552c2d9d3774d
      size: 207
    - path: edition-isbns.parquet
      md5: ffe6f2bd530fa0a96700d50c6f53a64b
      size: 163883427
    outs:
    - path: edition-isbn-ids.parquet
      md5: 35d3e456a5741b34562781cc814ec8e1.dir
      size: 213242294
      nfiles: 16
