[package]
name = "bookdata"
version = "2.1.0"
authors = ["Michael Ekstrand <michaelekstrand@boisestate.edu>"]
edition = "2021"
license = "MIT"
rust-version = "1.59"
default-run = "bookdata"

[profile.release]
opt-level = 3
debug = 1
lto = "thin"

[dependencies]
paste = "^1.0"

enum_dispatch = "^0.3.7"
clap = { version="^4", features=["derive"] }
log = { version = "^0.4.8", features = ["std"] }
indicatif = "^0.17.0"
happylog = { version="^0.3.0-b3", features=["clap"] }

lazy_static = "^1"

toml = "0.7"
csv = "^1.0"
quick-xml = "^0.29.0"
serde = { version="^1.0", features=["derive"] }
serde_json = { version="^1.0" }
rmp-serde = "^1.0"
text-template = "^0.1"

os_pipe = "^1.0"
fallible-iterator = "^0.3.0"
anyhow = "^1.0.26"
thiserror = "^1.0"
num_cpus = "^1"
rayon = "^1.5"
crossbeam = "^0.8"
hashbrown = "^0.14"

md-5 = "^0.10"
zstd = "^0.12"
flate2 = { version="^1.0.6" }
zip = { version="^0.6.0", default-features=false, features=["deflate"] }

unicode-normalization = "0.1"
parse-display = "^0.8"
hex = "^0.4.3"
chrono = "^0.4"
glob = "^0.3"
peg = "^0.8"
regex = "^1.5.0"
friendly = { version="^0.1.0", features=["chrono"] }
cpu-time = "^1.0"

petgraph = { version="^0.6", features=["serde-1"] }
# graphalgs = { version="^0.0.6", optional=true }

polars = { version="^0.34", default-features=false, features=[
    "parquet", "csv", "lazy",
    "dtype-slim", "dtype-i8", "dtype-u8", "dtype-i16",
    "fmt",
    # "dtype-full",
] }
polars-arrow = "0.34"
arrow2 = { version="^0.17", features=["io_parquet"] }
arrow2_convert = "^0.5"
parquet2 = "^0.17"

mimalloc = { version="^0.1", default-features=false }

[dev-dependencies]
tempfile = "^3.2"
quickcheck = {version="^1.0", default-features=false}
env_logger = "^0.10"
test-log = "^0.2"

[features]
default = ["log/release_max_level_debug"]
# adv-graph = ["graphalgs", "rayon"]

[target.'cfg(unix)'.dependencies]
libc = "^0.2"
