schema: '2.0'
stages:
  BX:
    cmd: unzip BX-CSV-Dump.zip
    deps:
    - path: BX-CSV-Dump.zip
      md5: 37d647ee9e18ba134ea6d78ee4fe5292
    outs:
    - path: BX-Book-Ratings.csv
      md5: b34fe0534c9b846b8a45f316c60eb92b
    - path: BX-Books.csv
      md5: d50d59b0c40f10d37d379d9fd3fb98ac
    - path: BX-Users.csv
      md5: 6ec3fe6463da9e149d474ed8226612a2
  loc-books:
    cmd: curl https://www.loc.gov/cds/downloads/MDSConnect/BooksAll.2016.part[01-43].xml.gz
      -o "loc-books/BooksAll.2016.part#1.xml.gz" --create-dirs
    outs:
    - path: loc-books
      md5: 1b1e7ab1d98cc81e373dfc53345d4bb7.dir
  loc-names:
    cmd: curl https://www.loc.gov/cds/downloads/MDSConnect/Names.2016.part[01-40].xml.gz
      -o "loc-names/Names.2016.part#1.xml.gz" --create-dirs
    outs:
    - path: loc-names
      md5: fc488a8775561070cced774803fe0d72.dir
  ol-authors:
    cmd: curl -L -o openlib/ol_dump_authors.txt.gz https://openlibrary.org/data/ol_dump_authors_2023-05-31.txt.gz
    outs:
    - path: openlib/ol_dump_authors.txt.gz
      hash: md5
      md5: 5e5b174766db6c9ea829d95bb7ff7e25
      size: 566368624
  ol-editions:
    cmd: curl -L -o openlib/ol_dump_editions.txt.gz https://openlibrary.org/data/ol_dump_editions_2023-05-31.txt.gz
    outs:
    - path: openlib/ol_dump_editions.txt.gz
      hash: md5
      md5: a1e8ef549e76dffea0525799411ed208
      size: 9685505842
  ol-works:
    cmd: curl -L -o openlib/ol_dump_works.txt.gz https://openlibrary.org/data/ol_dump_works_2023-05-31.txt.gz
    outs:
    - path: openlib/ol_dump_works.txt.gz
      hash: md5
      md5: 9f0abbd46fc1f3d87a0998032d97f38a
      size: 3062314062
  viaf-clusters:
    cmd: curl -o viaf-clusters-marc21.xml.gz --retry 100 https://viaf.org/viaf/data/viaf-20230605-clusters-marc21.xml.gz
    outs:
    - path: viaf-clusters-marc21.xml.gz
      hash: md5
      md5: d44ff584c65b9cb82dae40e323ca1fd1
      size: 13390966142
