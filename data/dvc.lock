schema: '2.0'
stages:
  BX:
    cmd: unzip BX-CSV-Dump.zip
    deps:
    - path: BX-CSV-Dump.zip
      md5: 37d647ee9e18ba134ea6d78ee4fe5292
    outs:
    - path: BX-Book-Ratings.csv
      md5: b34fe0534c9b846b8a45f316c60eb92b
    - path: BX-Books.csv
      md5: d50d59b0c40f10d37d379d9fd3fb98ac
    - path: BX-Users.csv
      md5: 6ec3fe6463da9e149d474ed8226612a2
  loc-books:
    cmd: curl https://www.loc.gov/cds/downloads/MDSConnect/BooksAll.2016.part[01-43].xml.gz
      -o "loc-books/BooksAll.2016.part#1.xml.gz" --create-dirs
    outs:
    - path: loc-books
      md5: 1b1e7ab1d98cc81e373dfc53345d4bb7.dir
  loc-names:
    cmd: curl https://www.loc.gov/cds/downloads/MDSConnect/Names.2016.part[01-40].xml.gz
      -o "loc-names/Names.2016.part#1.xml.gz" --create-dirs
    outs:
    - path: loc-names
      md5: fc488a8775561070cced774803fe0d72.dir
  ol-authors:
    cmd: curl -L -o openlib/ol_dump_authors.txt.gz https://openlibrary.org/data/ol_dump_authors_2023-10-31.txt.gz
    outs:
    - path: openlib/ol_dump_authors.txt.gz
      hash: md5
      md5: 6ee47ac89e0aaff90dda58912f99474a
      size: 583172998
  ol-editions:
    cmd: curl -L -o openlib/ol_dump_editions.txt.gz https://openlibrary.org/data/ol_dump_editions_2023-10-31.txt.gz
    outs:
    - path: openlib/ol_dump_editions.txt.gz
      hash: md5
      md5: 142abbca6ff89de6d617f43dfc33e898
      size: 9882246836
  ol-works:
    cmd: curl -L -o openlib/ol_dump_works.txt.gz https://openlibrary.org/data/ol_dump_works_2023-10-31.txt.gz
    outs:
    - path: openlib/ol_dump_works.txt.gz
      hash: md5
      md5: 2b0391ea543492a6e83d3e4bb339b3e7
      size: 3133783453
  viaf-clusters:
    cmd: curl -o viaf-clusters-marc21.xml.gz --retry 100 https://viaf.org/viaf/data/viaf-20231107-clusters-marc21.xml.gz
    outs:
    - path: viaf-clusters-marc21.xml.gz
      hash: md5
      md5: d181516526af624cd5b68060a4b39e68
      size: 14073337486
