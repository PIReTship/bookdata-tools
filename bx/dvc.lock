schema: '2.0'
stages:
  clean-ratings:
    cmd: python ../run.py bx-extract ../data/BX-CSV-Dump.zip cleaned-ratings.csv
    deps:
    - path: ../data/BX-CSV-Dump.zip
      md5: 37d647ee9e18ba134ea6d78ee4fe5292
      size: 26085508
    - path: ../scripts/bx-extract.py
      md5: ef3a36b8a0694743a8be1d5e773c7b29
      size: 1159
    outs:
    - path: cleaned-ratings.csv
      md5: da3196d4af84ae39b3713e73c59677c7
      size: 22627884
  bx-cluster-ratings:
    cmd: python ../run.py --rust fusion bx-cluster-ratings.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 56ef5f842af3651da12b632886432122
      size: 152341832
    - path: ../book-links/isbn-clusters.parquet
      md5: a492385cb01a5ec059b5035ed703307c
      size: 162226729
    - path: bx-cluster-ratings.tcl
      md5: d1e535a0f603d770e11b85b3867e73d5
      size: 396
    - path: cleaned-ratings.csv
      md5: da3196d4af84ae39b3713e73c59677c7
      size: 22627884
    outs:
    - path: bx-cluster-ratings.csv.gz
      md5: 255df5189902db957a0df7cc3121737f
      size: 3496859
  bx-cluster-actions:
    cmd: python ../run.py --rust fusion bx-cluster-actions.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 56ef5f842af3651da12b632886432122
      size: 152341832
    - path: ../book-links/isbn-clusters.parquet
      md5: a492385cb01a5ec059b5035ed703307c
      size: 162226729
    - path: bx-cluster-actions.tcl
      md5: 5d9d3bcc1500a4529b4334d4557b3003
      size: 358
    - path: cleaned-ratings.csv
      md5: da3196d4af84ae39b3713e73c59677c7
      size: 22627884
    outs:
    - path: bx-cluster-actions.csv.gz
      md5: b4877893956f2663a35139439a738219
      size: 8210270
