schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 83bfbacff8b72b5d4163c796941d6234
      size: 12655431316
    - path: ../src/cli/scan_marc.rs
      md5: 33d542a8bc38a78076371d9b5e1a5408
      size: 3768
    - path: ../src/marc
      md5: 3bf926388044e9dde1227a1b9c23774c.dir
      size: 17547
      nfiles: 5
    outs:
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: author-names.csv.gz
      md5: 2a4a7f27d76a2f59cc0d962968391478
      size: 494345297
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: author-genders.parquet
      md5: 6f2e84ec0ae6bb81d54e369dda7a91bd
      size: 120612452
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/cli/index_names.rs
      md5: 9e97fd2a13df1ea5054ac6b88f200a6a
      size: 3862
    - path: author-names.csv.gz
      md5: 2a4a7f27d76a2f59cc0d962968391478
      size: 494345297
    outs:
    - path: author-name-index.csv.gz
      md5: b83fcda79ac628ecbc9047c2f0055849
      size: 666642198
    - path: author-name-index.parquet
      md5: 243e3b5324dc7e06c05a30449cf244fe
      size: 543716933
  schema@author-name-index:
    cmd: python ../run.py --rust pq-info -o author-name-index.json author-name-index.parquet
    deps:
    - path: author-name-index.parquet
      md5: 243e3b5324dc7e06c05a30449cf244fe
      size: 543716933
    outs:
    - path: author-name-index.json
      md5: 69ac8f1c08af6b20dd4bef2fee47d34c
      size: 351
  schema@viaf:
    cmd: python ../run.py --rust pq-info -o viaf.json viaf.parquet
    deps:
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: viaf.json
      md5: 7d9c064d941b256b5b02f1ff5c5ae9fe
      size: 1059
  schema@author-genders:
    cmd: python ../run.py --rust pq-info -o author-genders.json author-genders.parquet
    deps:
    - path: author-genders.parquet
      md5: 6f2e84ec0ae6bb81d54e369dda7a91bd
      size: 120612452
    outs:
    - path: author-genders.json
      md5: 5edd477704fda64a6b125887baabd726
      size: 352
