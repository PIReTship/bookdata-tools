schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/cli/scan_marc.rs
      md5: a4251844d7e739d990d1451764982b79
      size: 3583
    - path: ../src/marc
      md5: 9e2f84ad044ead81787970f73d1eb438.dir
      size: 16793
      nfiles: 5
    outs:
    - path: viaf.parquet
      md5: 0a507e35628c05542cd952e90c6788ce
      size: 10563863034
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: 0a507e35628c05542cd952e90c6788ce
      size: 10563863034
    outs:
    - path: author-names.csv.gz
      md5: d872c958d1043e901b4b13f7221b38f7
      size: 418696279
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: 0a507e35628c05542cd952e90c6788ce
      size: 10563863034
    outs:
    - path: author-genders.parquet
      md5: d44250d50199492e92cd67afac0610df
      size: 103296580
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/cli/index_names.rs
      md5: 660c73a111481bc4add4019c3754884a
      size: 2470
    - path: author-names.csv.gz
      md5: d872c958d1043e901b4b13f7221b38f7
      size: 418696279
    outs:
    - path: author-name-index.csv.gz
      md5: 732bb36c5a1403970fc9a53a3ba57308
      size: 497228171
    - path: author-name-index.parquet
      md5: 5253753bc679c2adaed69072a13852e7
      size: 483852211
