schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/bin/scan-marc
      md5: 797f3c50607fbba52ac2dc3b4eb2b133.dir
      size: 7102
      nfiles: 3
    outs:
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: b3412f519c9b48f7eb1ac8e07f6f76e8
      size: 225
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
    outs:
    - path: author-names.csv.gz
      md5: d0abb5f461685ed928fd5d4d813f0a5a
      size: 421326685
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 855c2df4331c585026e70104332004b0
      size: 189
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
    outs:
    - path: author-genders.csv.gz
      md5: 900f55fb25341ee72f93ce25a70c7526
      size: 75827863
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/bin/index-names.rs
      md5: 6793dfaa9ecc69f237bd2d692dc85eb4
      size: 2125
    - path: author-names.csv.gz
      md5: d4c7ac5b818a6cb081a4e1a6dcf47756
      size: 407380178
    outs:
    - path: author-name-index.parquet
      md5: ef8eb484af2e771d2528348e68fedea1
      size: 545086928
