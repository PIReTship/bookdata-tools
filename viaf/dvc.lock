schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/cli/scan_marc.rs
      md5: 52289f83a9be3da755a4eddc2fe2c680
      size: 3656
    - path: ../src/marc
      md5: db6eef7d87b56283dbbcdeea71a69a37.dir
      size: 16783
      nfiles: 5
    outs:
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
    outs:
    - path: author-names.csv.gz
      md5: e825c6458652609163ea3194fd9197ea
      size: 418433891
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
    outs:
    - path: author-genders.parquet
      md5: cbd6871e6ba229881aed5f58126fd652
      size: 102791330
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/cli/index_names.rs
      md5: 2462fc0233d616b17c0530f7a04d2174
      size: 2481
    - path: author-names.csv.gz
      md5: e825c6458652609163ea3194fd9197ea
      size: 418433891
    outs:
    - path: author-name-index.csv.gz
      md5: 98fa43a38c3fe086e8ba147a7b57163c
      size: 497230023
    - path: author-name-index.parquet
      md5: f089f44b3b568a316917893f449dfd41
      size: 483825830
