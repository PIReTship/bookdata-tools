schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/bin/scan-marc
      md5: ad5c80a47342edcd4593ef419421e126.dir
      size: 6837
      nfiles: 3
    outs:
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
    outs:
    - path: author-names.csv.gz
      md5: 4a8399f5b53a7fee59f0bc8959572cbf
      size: 420136594
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 855c2df4331c585026e70104332004b0
      size: 189
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
    outs:
    - path: author-genders.csv.gz
      md5: 900f55fb25341ee72f93ce25a70c7526
      size: 75827863
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/bin/index-names.rs
      md5: be66c65f71afa1e1e0e85a3bd831356f
      size: 2128
    - path: author-names.csv.gz
      md5: 4a8399f5b53a7fee59f0bc8959572cbf
      size: 420136594
    outs:
    - path: author-name-index.parquet
      md5: 74567c181b40f3d9cf27036ba0853732
      size: 550685613
