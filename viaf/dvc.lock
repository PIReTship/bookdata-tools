schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 83bfbacff8b72b5d4163c796941d6234
      size: 12655431316
    - path: ../src/cli/scan_marc.rs
      md5: 12a9d5d9854034367c903c5abb99d543
      size: 3557
    - path: ../src/marc
      md5: 3bf926388044e9dde1227a1b9c23774c.dir
      size: 16824
      nfiles: 5
    outs:
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: author-names.csv.gz
      md5: 2a4a7f27d76a2f59cc0d962968391478
      size: 494345297
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: author-genders.parquet
      md5: 6f2e84ec0ae6bb81d54e369dda7a91bd
      size: 120612452
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/cli/index_names.rs
      md5: 06ccbf23dca07e00e87d89dec625287a
      size: 2363
    - path: author-names.csv.gz
      md5: 2a4a7f27d76a2f59cc0d962968391478
      size: 494345297
    outs:
    - path: author-name-index.csv.gz
      md5: 2c9d12c9163b446d3cedf4297511a879
      size: 564234476
    - path: author-name-index.parquet
      md5: 40217b6d77292231541ac4611ab39ad4
      size: 544152510
  schema@author-name-index:
    cmd: python ../run.py --rust pq-info -o author-name-index.json author-name-index.parquet
    deps:
    - path: author-name-index.parquet
      md5: 663023a30c3d2f93ca4dea7d26793e9d
      size: 483832252
    outs:
    - path: author-name-index.json
      md5: 51182fb692c729e004c9c2f35b24de25
      size: 351
  schema@viaf:
    cmd: python ../run.py --rust pq-info -o viaf.json viaf.parquet
    deps:
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
    outs:
    - path: viaf.json
      md5: a3a19c00b21edb6eab06585afc95be57
      size: 1059
  schema@author-genders:
    cmd: python ../run.py --rust pq-info -o author-genders.json author-genders.parquet
    deps:
    - path: author-genders.parquet
      md5: cbd6871e6ba229881aed5f58126fd652
      size: 102791330
    outs:
    - path: author-genders.json
      md5: 4a450d88e5c99af2e6ca3d850bf27f71
      size: 352
