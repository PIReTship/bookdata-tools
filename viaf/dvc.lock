schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/bin/scan-marc
      md5: ad5c80a47342edcd4593ef419421e126.dir
      size: 6837
      nfiles: 3
    outs:
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
    outs:
    - path: author-names.csv.gz
      md5: 4a8399f5b53a7fee59f0bc8959572cbf
      size: 420136594
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 190
    - path: viaf.parquet
      md5: c37aaa28a476634417ed49c6f36f86a5
      size: 10108580700
    outs:
    - path: author-genders.parquet
      md5: 464561c18125c5d813a1643827594d90
      size: 144366853
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/bin/index-names.rs
      md5: be66c65f71afa1e1e0e85a3bd831356f
      size: 2217
    - path: author-names.csv.gz
      md5: 4a8399f5b53a7fee59f0bc8959572cbf
      size: 420136594
    outs:
    - path: author-name-index.parquet
      md5: 2496c5a51daf12728eac352e969b80be
      size: 521032148
