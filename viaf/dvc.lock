schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/bin/scan-marc
      md5: 71159598863602bab1f76664ef699ba5.dir
      size: 6853
      nfiles: 3
    outs:
    - path: viaf.parquet
      md5: 194963fba387d8b9463704237a650506
      size: 10108580700
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: 194963fba387d8b9463704237a650506
      size: 10108580700
    outs:
    - path: author-names.csv.gz
      md5: 9f0150a2cf54063797126778e99eaf2c
      size: 420123265
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: 194963fba387d8b9463704237a650506
      size: 10108580700
    outs:
    - path: author-genders.parquet
      md5: a7e3c869f8b444b8b0705d2e9bbf6dc2
      size: 148369290
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/bin/index-names.rs
      md5: 7a7b82c5d405052d960126d630a97dfa
      size: 2480
    - path: author-names.csv.gz
      md5: 9f0150a2cf54063797126778e99eaf2c
      size: 420123265
    outs:
    - path: author-name-index.csv.gz
      md5: 9de6d483655a3b79d94a0a5c661b1c4c
      size: 492886103
    - path: author-name-index.parquet
      md5: 45307e4dad9dc4d9b4353d79c04f3195
      size: 521027574
