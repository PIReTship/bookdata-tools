schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: ../src/cli/scan_marc.rs
      md5: 12a9d5d9854034367c903c5abb99d543
      size: 3557
    - path: ../src/marc
      md5: db6eef7d87b56283dbbcdeea71a69a37.dir
      size: 16783
      nfiles: 5
    outs:
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
    outs:
    - path: author-names.csv.gz
      md5: e825c6458652609163ea3194fd9197ea
      size: 418433891
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
    outs:
    - path: author-genders.parquet
      md5: cbd6871e6ba229881aed5f58126fd652
      size: 102791330
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/cli/index_names.rs
      md5: 06ccbf23dca07e00e87d89dec625287a
      size: 2363
    - path: author-names.csv.gz
      md5: e825c6458652609163ea3194fd9197ea
      size: 418433891
    outs:
    - path: author-name-index.csv.gz
      md5: b3aabf1eadec3499fec1791e6404e2d3
      size: 497228706
    - path: author-name-index.parquet
      md5: 663023a30c3d2f93ca4dea7d26793e9d
      size: 483832252
  schema@author-name-index:
    cmd: python ../run.py --rust pq-info -o author-name-index.json author-name-index.parquet
    deps:
    - path: author-name-index.parquet
      md5: 663023a30c3d2f93ca4dea7d26793e9d
      size: 483832252
    outs:
    - path: author-name-index.json
      md5: 51182fb692c729e004c9c2f35b24de25
      size: 351
  schema@viaf:
    cmd: python ../run.py --rust pq-info -o viaf.json viaf.parquet
    deps:
    - path: viaf.parquet
      md5: 4e274ee04004e80f8da0f1168f123ff2
      size: 10561644263
    outs:
    - path: viaf.json
      md5: a3a19c00b21edb6eab06585afc95be57
      size: 1059
  schema@author-genders:
    cmd: python ../run.py --rust pq-info -o author-genders.json author-genders.parquet
    deps:
    - path: author-genders.parquet
      md5: cbd6871e6ba229881aed5f58126fd652
      size: 102791330
    outs:
    - path: author-genders.json
      md5: 4a450d88e5c99af2e6ca3d850bf27f71
      size: 352
