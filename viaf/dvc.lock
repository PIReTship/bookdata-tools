schema: '2.0'
stages:
  scan-authors:
    cmd: python ../run.py --rust scan-marc -L -o viaf.parquet ../data/viaf-clusters-marc21.xml.gz
    deps:
    - path: ../data/viaf-clusters-marc21.xml.gz
      md5: 83bfbacff8b72b5d4163c796941d6234
      size: 12655431316
    - path: ../src/cli/scan_marc.rs
      md5: 12a9d5d9854034367c903c5abb99d543
      size: 3557
    - path: ../src/marc
      md5: 3bf926388044e9dde1227a1b9c23774c.dir
      size: 16824
      nfiles: 5
    outs:
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: d0ebf76118c885cd85ce01ddc87cdb64
      size: 223
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: author-names.csv.gz
      md5: 2a4a7f27d76a2f59cc0d962968391478
      size: 494345297
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 53a3022f70f9a5b5662a0b97501c891b
      size: 183
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: author-genders.parquet
      md5: 6f2e84ec0ae6bb81d54e369dda7a91bd
      size: 120612452
  index-names:
    cmd: python ../run.py --rust index-names author-names.csv.gz author-name-index.parquet
    deps:
    - path: ../src/cli/index_names.rs
      md5: af21be34c7a7d0e80e6509cff42115ce
      size: 3435
    - path: author-names.csv.gz
      md5: 2a4a7f27d76a2f59cc0d962968391478
      size: 494345297
    outs:
    - path: author-name-index.csv.gz
      md5: e4e3d17afef2946a414b9d4ef9e134ac
      size: 660374921
    - path: author-name-index.parquet
      md5: 40f3dee0c19479b7c777fd4801bf5acd
      size: 538439183
  schema@author-name-index:
    cmd: python ../run.py --rust pq-info -o author-name-index.json author-name-index.parquet
    deps:
    - path: author-name-index.parquet
      md5: 40217b6d77292231541ac4611ab39ad4
      size: 544152510
    outs:
    - path: author-name-index.json
      md5: e2a0dc9281cb72cc6f0cef377dbcb183
      size: 351
  schema@viaf:
    cmd: python ../run.py --rust pq-info -o viaf.json viaf.parquet
    deps:
    - path: viaf.parquet
      md5: a102bffe1cf58c36404bb4051bbad8d3
      size: 12519632429
    outs:
    - path: viaf.json
      md5: 7d9c064d941b256b5b02f1ff5c5ae9fe
      size: 1059
  schema@author-genders:
    cmd: python ../run.py --rust pq-info -o author-genders.json author-genders.parquet
    deps:
    - path: author-genders.parquet
      md5: 6f2e84ec0ae6bb81d54e369dda7a91bd
      size: 120612452
    outs:
    - path: author-genders.json
      md5: 5edd477704fda64a6b125887baabd726
      size: 352
