schema: '2.0'
stages:
  az-ratings:
    cmd: python run.py --rust pcat -t az.raw_ratings -s az-ratings -T import/az-ratings.transcript
      -D az-schema -f CSV data/ratings_Books.csv
    deps:
    - path: data/ratings_Books.csv
      md5: 77b4a5b887e14e16b13e7788bdf70156
      size: 916259348
    - path: schemas/az-schema.status
      md5: 6abe435d9a6b1dd53ba83a3a12d600f4
      size: 199
    outs:
    - path: import/az-ratings.transcript
      md5: 0714b0a434e03d21883d105ef76000fd
      size: 93
  bx-ratings:
    cmd: python run.py bx-import -T import/bx-ratings.transcript data/BX-Book-Ratings.csv
    deps:
    - path: data/BX-Book-Ratings.csv
      md5: b34fe0534c9b846b8a45f316c60eb92b
      size: 30682276
    - path: schemas/bx-schema.status
      md5: e2d62021499a07b132d06041830937ee
      size: 199
    outs:
    - path: import/bx-ratings.transcript
      md5: 511096523052e1563c4bdcc66b6ed143
  gr-authors:
    cmd: python run.py --rust import-json -T import/gr-authors.transcript --stage
      gr-authors -D gr-schema --truncate import/gr-authors.toml data/goodreads_book_authors.json.gz
    deps:
    - path: data/goodreads_book_authors.json.gz
      md5: b193c3febd961fb69443b65ba05b83a7
      size: 17877585
    - path: import/gr-authors.toml
      md5: 05080719337f65735dfeffacec9764c4
      size: 64
    - path: schemas/gr-schema.status
      md5: 90419bc9355a93959ecbd70912a1cdaa
      size: 404
    outs:
    - path: import/gr-authors.transcript
      md5: e53cb1d34c0a1a550a58105fba94e2cf
      size: 130
  gr-book-genres:
    cmd: python run.py --rust import-json -T import/gr-book-genres.transcript --stage
      gr-book-genres -D gr-schema --truncate import/gr-book-genres.toml data/goodreads_book_genres_initial.json.gz
    deps:
    - path: data/goodreads_book_genres_initial.json.gz
      md5: 99ee3d1cadd68818c3dd0ef0d2f10602
      size: 24253992
    - path: import/gr-book-genres.toml
      md5: 5098a690f9f9e1320da3a12f0654192a
      size: 74
    - path: schemas/gr-schema.status
      md5: 90419bc9355a93959ecbd70912a1cdaa
      size: 404
    outs:
    - path: import/gr-book-genres.transcript
      md5: 86795d1730ad86e1be92f2b010ca7bfd
      size: 137
  gr-books:
    cmd: python run.py --rust import-json -T import/gr-books.transcript --stage gr-books
      -D gr-schema --truncate import/gr-books.toml data/goodreads_books.json.gz
    deps:
    - path: data/goodreads_books.json.gz
      md5: 01b40c70a00fb6aa321ee478f0fd0d6b
      size: 2043729443
    - path: import/gr-books.toml
      md5: e30abcef8e2d1c32243dcae1a526dfcc
      size: 60
    - path: schemas/gr-schema.status
      md5: 90419bc9355a93959ecbd70912a1cdaa
      size: 404
    outs:
    - path: import/gr-books.transcript
      md5: 4563d46bdb94052b4ea5a55819e7ce35
      size: 123
  gr-interactions:
    cmd: python run.py --rust import-json -T import/gr-interactions.transcript --stage
      gr-interactions -D gr-schema --truncate import/gr-interactions.toml data/goodreads_interactions.json.gz
    deps:
    - path: data/goodreads_interactions.json.gz
      md5: f2d054a85f33d405a9bff6933005ba89
      size: 9388113365
    - path: import/gr-interactions.toml
      md5: c6133a33f6dd80d2e378c0b976112802
      size: 74
    - path: schemas/gr-schema.status
      md5: 90419bc9355a93959ecbd70912a1cdaa
      size: 404
    outs:
    - path: import/gr-interactions.transcript
      md5: 9b4e98650a9b939ed912a397b27adca3
      size: 130
  gr-works:
    cmd: python run.py --rust import-json -T import/gr-works.transcript --stage gr-works
      -D gr-schema --truncate import/gr-works.toml data/goodreads_book_works.json.gz
    deps:
    - path: data/goodreads_book_works.json.gz
      md5: e80738a88d02d2b0081cd249d9b4f081
      size: 81412944
    - path: import/gr-works.toml
      md5: 670f9192bd7f532e5787b829722ebe0a
      size: 60
    - path: schemas/gr-schema.status
      md5: 90419bc9355a93959ecbd70912a1cdaa
      size: 404
    outs:
    - path: import/gr-works.transcript
      md5: c881eb7580da9f2fa1af23b46144be7f
      size: 128
  loc-mds-books:
    cmd: python run.py --rust parse-marc --db-schema locmds -t book_marc_field --truncate
      --stage loc-mds-books -D loc-mds-schema --transcript import/loc-mds-books.transcript
      --src-dir data/loc-books --src-prefix BooksAll.2016
    deps:
    - path: data/loc-books
      md5: 1b1e7ab1d98cc81e373dfc53345d4bb7.dir
      size: 3129774145
      nfiles: 43
    - path: schemas/loc-mds-schema.status
      md5: 46f16ce2b7d1b98552f9b25db85320f0
      size: 266
    outs:
    - path: import/loc-mds-books.transcript
      md5: 19b0a011c9053361278a3d812518b229
  loc-mds-names:
    cmd: python run.py --rust parse-marc --db-schema locmds -t name_marc_field --truncate
      --stage loc-mds-names -D loc-mds-schema --transcript import/loc-mds-names.transcript
      --src-dir data/loc-names --src-prefix Names.2016
    deps:
    - path: data/loc-names
      md5: fc488a8775561070cced774803fe0d72.dir
      size: 1410755359
      nfiles: 40
    - path: schemas/loc-mds-schema.status
      md5: 46f16ce2b7d1b98552f9b25db85320f0
      size: 266
    outs:
    - path: import/loc-mds-names.transcript
      md5: 14ce7449e200f45a93058a6fdac918ec
  ol-authors:
    cmd: python run.py --rust import-json -T import/ol-authors.transcript --stage
      ol-authors -D ol-schema --truncate import/ol-authors.toml data/ol_dump_authors.txt.gz
    deps:
    - path: data/ol_dump_authors.txt.gz
      md5: 364e02a44e9e9a572e88692fc78fef27
      size: 306408477
    - path: import/ol-authors.toml
      md5: d39f4bee21e807362a55474f7c6093d0
      size: 111
    - path: schemas/ol-schema.status
      md5: 95a145b1e51fee59679ae560537258e4
      size: 265
    outs:
    - path: import/ol-authors.transcript
      md5: fa926be884dc6c05eabf8b73bd4352a6
      size: 122
  ol-editions:
    cmd: python run.py --rust import-json -T import/ol-editions.transcript --stage
      ol-editions -D ol-schema --truncate import/ol-editions.toml data/ol_dump_editions.txt.gz
    deps:
    - path: data/ol_dump_editions.txt.gz
      md5: e105295bf5f8025ecd7e43838ed0739c
      size: 6081278291
    - path: import/ol-editions.toml
      md5: e528cfea761765865a7097be7abbc510
      size: 114
    - path: schemas/ol-schema.status
      md5: 95a145b1e51fee59679ae560537258e4
      size: 265
    outs:
    - path: import/ol-editions.transcript
      md5: 478ae29523c79ed9d4d26f20bbd1090c
      size: 123
  ol-works:
    cmd: python run.py --rust import-json -T import/ol-works.transcript --stage ol-works
      -D ol-schema --truncate import/ol-works.toml data/ol_dump_works.txt.gz
    deps:
    - path: data/ol_dump_works.txt.gz
      md5: 84e236955e5f683adde6a677d80475a0
      size: 1666325144
    - path: import/ol-works.toml
      md5: 5ad04190c9392dd7cae3fdead9291f09
      size: 105
    - path: schemas/ol-schema.status
      md5: 95a145b1e51fee59679ae560537258e4
      size: 265
    outs:
    - path: import/ol-works.transcript
      md5: e29cbd1abe6c246d38557cde801b7bf3
      size: 120
  viaf:
    cmd: python run.py --rust parse-marc --db-schema viaf -t marc_field --truncate
      --stage viaf -D viaf-schema --transcript import/viaf.transcript --line-mode
      data/viaf-clusters-marc21.xml.gz
    deps:
    - path: data/viaf-clusters-marc21.xml.gz
      md5: 2f1af5262584d38f7331d333dec81cc3
      size: 10662471024
    - path: schemas/viaf-schema.status
      md5: 2b769ad90bf3c9f5024b00aabf04c6e0
      size: 204
    outs:
    - path: import/viaf.transcript
      md5: 326fe03b3007b0dbe02ff43c3da7e6cb
  status@az-ratings:
    cmd: python ../run.py stage-status -o az-ratings.status az-ratings
    deps:
    - path: az-ratings.transcript
      md5: 0714b0a434e03d21883d105ef76000fd
      size: 93
    outs:
    - path: az-ratings.status
      md5: f649be2761a006ca8746fda823f60d4a
      size: 180
  status@loc-mds-books:
    cmd: python ../run.py stage-status -o loc-mds-books.status loc-mds-books
    deps:
    - path: loc-mds-books.transcript
      md5: 19b0a011c9053361278a3d812518b229
      size: 4259
    outs:
    - path: loc-mds-books.status
      md5: 192dfcb8ed5016b1140e27ad2dd9c9e3
      size: 4030
  status@ol-authors:
    cmd: python ../run.py stage-status -o ol-authors.status ol-authors
    deps:
    - path: ol-authors.transcript
      md5: fa926be884dc6c05eabf8b73bd4352a6
      size: 122
    outs:
    - path: ol-authors.status
      md5: f9297936510a85e5d790ab687df35c0b
      size: 185
  status@gr-works:
    cmd: python ../run.py stage-status -o gr-works.status gr-works
    deps:
    - path: gr-works.transcript
      md5: c881eb7580da9f2fa1af23b46144be7f
      size: 128
    outs:
    - path: gr-works.status
      md5: 0aef07ba9cccb7317b7534bc20e16c91
      size: 189
  status@loc-mds-names:
    cmd: python ../run.py stage-status -o loc-mds-names.status loc-mds-names
    deps:
    - path: loc-mds-names.transcript
      md5: 14ce7449e200f45a93058a6fdac918ec
      size: 3845
    outs:
    - path: loc-mds-names.status
      md5: 9d9725ff15b67137e6f2acd5e5b769c2
      size: 3637
  status@ol-works:
    cmd: python ../run.py stage-status -o ol-works.status ol-works
    deps:
    - path: ol-works.transcript
      md5: e29cbd1abe6c246d38557cde801b7bf3
      size: 120
    outs:
    - path: ol-works.status
      md5: 444468e137396a687d972659ac0a780b
      size: 181
  status@gr-books:
    cmd: python ../run.py stage-status -o gr-books.status gr-books
    deps:
    - path: gr-books.transcript
      md5: 4563d46bdb94052b4ea5a55819e7ce35
      size: 123
    outs:
    - path: gr-books.status
      md5: 86861169a78fb7786b3d4b31f5ad62c8
      size: 184
  status@gr-interactions:
    cmd: python ../run.py stage-status -o gr-interactions.status gr-interactions
    deps:
    - path: gr-interactions.transcript
      md5: 9b4e98650a9b939ed912a397b27adca3
      size: 130
    outs:
    - path: gr-interactions.status
      md5: efa5180555a80f1c935a543418a95ee6
      size: 198
  status@gr-book-genres:
    cmd: python ../run.py stage-status -o gr-book-genres.status gr-book-genres
    deps:
    - path: gr-book-genres.transcript
      md5: 86795d1730ad86e1be92f2b010ca7bfd
      size: 137
    outs:
    - path: gr-book-genres.status
      md5: 38965034bf7980177a5c3d22f2369eda
      size: 204
  status@viaf:
    cmd: python ../run.py stage-status -o viaf.status viaf
    deps:
    - path: viaf.transcript
      md5: 326fe03b3007b0dbe02ff43c3da7e6cb
      size: 136
    outs:
    - path: viaf.status
      md5: e0b3b720e384bc860ba26a3313a8b52d
      size: 186
  status@bx-ratings:
    cmd: python ../run.py stage-status -o bx-ratings.status bx-ratings
    deps:
    - path: bx-ratings.transcript
      md5: 511096523052e1563c4bdcc66b6ed143
      size: 146
    outs:
    - path: bx-ratings.status
      md5: 39f96955b2380724518a32317e6d6e5a
      size: 174
  status@ol-editions:
    cmd: python ../run.py stage-status -o ol-editions.status ol-editions
    deps:
    - path: ol-editions.transcript
      md5: 478ae29523c79ed9d4d26f20bbd1090c
      size: 123
    outs:
    - path: ol-editions.status
      md5: 686957ac87a58fb0ad68cb0b65375722
      size: 187
  status@gr-authors:
    cmd: python ../run.py stage-status -o gr-authors.status gr-authors
    deps:
    - path: gr-authors.transcript
      md5: e53cb1d34c0a1a550a58105fba94e2cf
      size: 130
    outs:
    - path: gr-authors.status
      md5: 2f0fc94473bbc887c4e8f5049c77ccc8
      size: 193
  gr-book-series:
    cmd: python run.py --rust import-json -T import/gr-book-series.transcript --stage
      gr-book-series -D gr-schema --truncate import/gr-book-series.toml data/goodreads_book_series.json.gz
    deps:
    - path: data/goodreads_book_genres_initial.json.gz
      md5: 99ee3d1cadd68818c3dd0ef0d2f10602
      size: 24253992
    - path: import/gr-book-series.toml
      md5: 554c97609e3893a33a55f2a2ba527826
      size: 64
    - path: schemas/gr-schema.status
      md5: bda41944c7f3ff2a207edb2c8a83c9fc
      size: 404
    outs:
    - path: import/gr-book-series.transcript
      md5: 91ac006a0db699bc4d9b577529f7d2ba
      size: 129
  status@gr-book-series:
    cmd: python ../run.py stage-status -o gr-book-series.status gr-book-series
    deps:
    - path: gr-book-series.transcript
      md5: 91ac006a0db699bc4d9b577529f7d2ba
      size: 129
    outs:
    - path: gr-book-series.status
      md5: 9b00503eac12f80764b5b3d17a37083d
      size: 196
  loc-id-instances:
    cmd: python run.py --rust import-ntriples --db-schema locid -D loc-id-schema -T
      import/loc-id-instances.transcript -s loc-id-instances data/loc-id/bibframeinstances.nt.zip
      --prefix instance
    deps:
    - path: data/loc-id/bibframeinstances.nt.zip
    - path: pgstat://loc-id-schema
    outs:
    - path: import/loc-id-instances.transcript
    - path: pgstat://loc-id-instances
  loc-id-names:
    cmd: python run.py --rust import-ntriples --db-schema locid -D loc-id-schema -T
      import/loc-id-names.transcript -s loc-id-names data/loc-id/lcnaf.both.nt.zip
      --prefix auth
    deps:
    - path: data/loc-id/lcnaf.both.nt.zip
      md5: aa742d27705cf8dfcf825653a75c526b
      size: 10970322540
    - path: schemas/loc-id-schema.status
      md5: 9281a40fc18f85f80b8e532943146f08
      size: 166
    outs:
    - path: import/loc-id-names.transcript
      md5: 68696ff4c1deaac2ad2566b0b11b57a4
      size: 88
  loc-id-works:
    cmd: python run.py --rust import-ntriples --db-schema locid -D loc-id-schema -T
      import/loc-id-works.transcript -s loc-id-works data/loc-id/bibframeworks.nt.zip
      --prefix work
    deps:
    - path: data/loc-id/bibframeworks.nt.zip
    - path: pgstat://loc-id-schema
    outs:
    - path: import/loc-id-works.transcript
    - path: pgstat://loc-id-works
  status@loc-id-names:
    cmd: python ../run.py stage-status -o loc-id-names.status loc-id-names
    deps:
    - path: loc-id-names.transcript
      md5: 68696ff4c1deaac2ad2566b0b11b57a4
      size: 88
    outs:
    - path: loc-id-names.status
      md5: 201d3854b386ae90dbcb1677f58ea38a
      size: 193
  loc-id-demo-mads:
    cmd: python run.py --rust import-ntriples --db-schema locid -D loc-id-schema -T
      import/loc-id-demo-mads.transcript -s loc-id-demo-mads data/loc-id/authoritiesdemographicTerms.nt.madsrdf.zip
      --prefix auth
    deps:
    - path: data/loc-id/authoritiesdemographicTerms.nt.madsrdf.zip
      md5: 4a84b66439e1ecd46b6c856a15b40430
      size: 957089
    - path: schemas/loc-id-schema.status
      md5: 9281a40fc18f85f80b8e532943146f08
      size: 170
    outs:
    - path: import/loc-id-demo-mads.transcript
      md5: 4f929ebe242664d91e98c8cc31acf231
      size: 156
  loc-id-demo-skos:
    cmd: python run.py --rust import-ntriples --db-schema locid -D loc-id-schema -T
      import/loc-id-demo-skos.transcript -s loc-id-demo-skos data/loc-id/authoritiesdemographicTerms.nt.skos.zip
      --prefix auth
    deps:
    - path: data/loc-id/authoritiesdemographicTerms.nt.skos.zip
      md5: 375eac2c04a5cd6932d3fe8a478a7a9e
      size: 243670
    - path: schemas/loc-id-schema.status
      md5: 9281a40fc18f85f80b8e532943146f08
      size: 170
    outs:
    - path: import/loc-id-demo-skos.transcript
      md5: 46b2a41397d1ab939074986d4d7297de
      size: 153
  gender-codes:
    cmd: python ../run.py gender-tool --import-codes -T gender-codes.transcript ../data/lcnaf-gender-codes.csv
    deps:
    - path: ../data/lcnaf-gender-codes.csv
      md5: 37bf72e0d3404338b5fc1712b3f84a09
      size: 1285
    - path: ../index/loc-id-author-index.status
      md5: f5c75ee9c9b52ddba293e02211485bdb
      size: 326
    outs:
    - path: gender-codes.transcript
      md5: d2e7fd7825360d7f76427509924be935
      size: 94
  status@gender-codes:
    cmd: python ../run.py stage-status -o gender-codes.status gender-codes
    deps:
    - path: gender-codes.transcript
      md5: d2e7fd7825360d7f76427509924be935
      size: 94
    outs:
    - path: gender-codes.status
      md5: 719e25c7fbe7ff1c32634b7bbbf0b5e1
      size: 184
