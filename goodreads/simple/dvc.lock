schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv
      md5: 696fbf71f0082c0b6a2379182b147c1e
      size: 4318621741
    - path: ../../src/cli/goodreads
      md5: 81d7a948aff94ca6cfdd11752f66770f.dir
      size: 10964
      nfiles: 4
    - path: ../../src/goodreads
      md5: 2365b11eeb1e1dd8d4a5f5287cb4876f.dir
      size: 13755
      nfiles: 6
    outs:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 3666e134e64d7aefd31594cce588f55b
      size: 19837145
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      md5: 3b0791c21cb261993d5acfb3c86c9f00
      size: 1471909250
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 3666e134e64d7aefd31594cce588f55b
      size: 19837145
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      md5: 5c789aa10b7310a8619d910d90a7a320
      size: 690116567
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    outs:
    - path: gr-interactions.json
      md5: 74b4602621d42efc878cc838594bd4f4
      size: 523
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple --native-works
      -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 3666e134e64d7aefd31594cce588f55b
      size: 19837145
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      md5: f4cfa2ace7df34915ae5daaf57afeb63
      size: 721253889
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: f4cfa2ace7df34915ae5daaf57afeb63
      size: 721253889
    outs:
    - path: gr-work-ratings.json
      md5: d440d2f75eb7f0ba73058f7ecf9c2474
      size: 425
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 80ae9713d5c1e6a27c575c6812c21285
      size: 690107038
    outs:
    - path: gr-cluster-ratings.json
      md5: c0816405314ae7da5aee561326cc02ff
      size: 424
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: 31d44565225b94d6f5d211ea4ac0632c
      size: 1471911410
    outs:
    - path: gr-cluster-actions.json
      md5: 0f96e3f18f059f6208e7a4d7e4f08c1e
      size: 431
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 3666e134e64d7aefd31594cce588f55b
      size: 19837145
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      md5: b62e8d3cff44f07b6e1100167c80fbe0
      size: 1527998597
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: b62e8d3cff44f07b6e1100167c80fbe0
      size: 1527998597
    outs:
    - path: gr-work-actions.json
      md5: bc34d4f856041080514bf8eebf4075b9
      size: 431
