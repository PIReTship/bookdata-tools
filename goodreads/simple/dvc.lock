schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv
      md5: 696fbf71f0082c0b6a2379182b147c1e
      size: 4318621741
    - path: ../../src/cli/goodreads
      md5: 2083d583e9d78e0c244d722902417157.dir
      size: 12128
      nfiles: 4
    - path: ../../src/goodreads
      md5: 49baa19c011307b48ca3fb6e29c777d6.dir
      size: 17036
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 50a9230841b77e3f0b97bf6f0db7e1cf
      size: 7429
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      md5: 5754902ca2ec1049f606657965549b7d
      size: 1405175187
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 50a9230841b77e3f0b97bf6f0db7e1cf
      size: 7429
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      md5: 3c8b17fab0b17767407cde13e65ad4fb
      size: 659768795
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    outs:
    - path: gr-interactions.json
      md5: 2291d1d395b4358bf3650fe23d6bcfb0
      size: 523
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple --native-works
      -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 50a9230841b77e3f0b97bf6f0db7e1cf
      size: 7429
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      md5: e41c58d0a5659be69f6c170aa7a4f33e
      size: 689576019
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: e41c58d0a5659be69f6c170aa7a4f33e
      size: 689576019
    outs:
    - path: gr-work-ratings.json
      md5: 5b13f9297d70393a78265289da1f55d6
      size: 425
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 3c8b17fab0b17767407cde13e65ad4fb
      size: 659768795
    outs:
    - path: gr-cluster-ratings.json
      md5: 3e72c4a82ab8f09fba91ee083bd38485
      size: 424
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: 5754902ca2ec1049f606657965549b7d
      size: 1405175187
    outs:
    - path: gr-cluster-actions.json
      md5: f039dfcc6d3b83bfaae61d16626dd0e1
      size: 431
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 50a9230841b77e3f0b97bf6f0db7e1cf
      size: 7429
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      md5: 7075d8259595b481e0b1b05e33f653ab
      size: 1459824490
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: 7075d8259595b481e0b1b05e33f653ab
      size: 1459824490
    outs:
    - path: gr-work-actions.json
      md5: a18c64b5554c795fb383e019251a7418
      size: 431
  cluster-actions-5core:
    cmd: python ../../run.py --rust kcore -o gr-cluster-actions-5core.parquet gr-cluster-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: 1687cd58ba626b4585a38ffca547d380
      size: 3490
    - path: gr-cluster-actions.parquet
      md5: 5754902ca2ec1049f606657965549b7d
      size: 1405175187
    outs:
    - path: gr-cluster-actions-5core.parquet
      md5: 04f1c38006de26bb380e75fc5259065e
      size: 1396884089
  work-ratings-5core:
    cmd: python ../../run.py --rust kcore -o gr-work-ratings-5core.parquet gr-work-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: 1687cd58ba626b4585a38ffca547d380
      size: 3490
    - path: gr-work-ratings.parquet
      md5: e41c58d0a5659be69f6c170aa7a4f33e
      size: 689576019
    outs:
    - path: gr-work-ratings-5core.parquet
      md5: fb4c0ea2ebfe2db3e8b7606c1d18e68d
      size: 678168633
  work-actions-5core:
    cmd: python ../../run.py --rust kcore -o gr-work-actions-5core.parquet gr-work-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: 1687cd58ba626b4585a38ffca547d380
      size: 3490
    - path: gr-work-actions.parquet
      md5: 7075d8259595b481e0b1b05e33f653ab
      size: 1459824490
    outs:
    - path: gr-work-actions-5core.parquet
      md5: b1ccc88ac6232adcca5458e35e76fb57
      size: 1452774664
  cluster-ratings-5core:
    cmd: python ../../run.py --rust kcore -o gr-cluster-ratings-5core.parquet gr-cluster-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: 1687cd58ba626b4585a38ffca547d380
      size: 3490
    - path: gr-cluster-ratings.parquet
      md5: 3c8b17fab0b17767407cde13e65ad4fb
      size: 659768795
    outs:
    - path: gr-cluster-ratings-5core.parquet
      md5: 067075ddda8e8043ce5d89619ac5c522
      size: 648163829
