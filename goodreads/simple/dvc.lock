schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv
      md5: 696fbf71f0082c0b6a2379182b147c1e
      size: 4318621741
    - path: ../../src/cli/goodreads
      md5: 3cb95483e14880f6e62ce8529579d7ef.dir
      size: 12116
      nfiles: 4
    - path: ../../src/goodreads
      md5: 49baa19c011307b48ca3fb6e29c777d6.dir
      size: 17036
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 6eeb2145b31d1f5d5377f54f483cd915
      size: 7417
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      md5: 9aebe8dae28a8b518e6f95ebd4c07e83
      size: 1474223192
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 6eeb2145b31d1f5d5377f54f483cd915
      size: 7417
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      md5: 27f4fe36792dd6ca02a352e7f3347f44
      size: 690875231
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    outs:
    - path: gr-interactions.json
      md5: 2291d1d395b4358bf3650fe23d6bcfb0
      size: 523
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple --native-works
      -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 6eeb2145b31d1f5d5377f54f483cd915
      size: 7417
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      md5: 0a32a0f8ded8f869f51331f8600b6761
      size: 722226759
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: 0a32a0f8ded8f869f51331f8600b6761
      size: 722226759
    outs:
    - path: gr-work-ratings.json
      md5: 7c92c6f0939ee94160e2528c1866ee4f
      size: 425
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 27f4fe36792dd6ca02a352e7f3347f44
      size: 690875231
    outs:
    - path: gr-cluster-ratings.json
      md5: 91a21c341cf4777873241f28104b2e29
      size: 424
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: 9aebe8dae28a8b518e6f95ebd4c07e83
      size: 1474223192
    outs:
    - path: gr-cluster-actions.json
      md5: a6859f74089e047b4767eeb45032b8cd
      size: 431
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 17c43318b93c22563377f71b2ee45a1e
      size: 19787709
    - path: goodreads/simple/gr-interactions.parquet
      md5: 9aa660d33392a043736f9d05a5b8d314
      size: 1459776033
    - path: src/cli/goodreads/cluster.rs
      md5: 6eeb2145b31d1f5d5377f54f483cd915
      size: 7417
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      md5: b545fd5e8f3a1cb964597b1768fe0dfe
      size: 1531350506
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: b545fd5e8f3a1cb964597b1768fe0dfe
      size: 1531350506
    outs:
    - path: gr-work-actions.json
      md5: 33c20ae068515fc3a499fa0a81303cd5
      size: 431
  cluster-actions-5core:
    cmd: python ../../run.py --rust kcore -o gr-cluster-actions-5core.parquet gr-cluster-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: cedb12dd297cd4d7ee2f4e13fd3deadc
      size: 4446
    - path: gr-cluster-actions.parquet
      md5: 9aebe8dae28a8b518e6f95ebd4c07e83
      size: 1474223192
    outs:
    - path: gr-cluster-actions-5core.parquet
      md5: 8dcf421275c266dcd9ca73bfd2c85d87
      size: 1465696777
  work-ratings-5core:
    cmd: python ../../run.py --rust kcore -o gr-work-ratings-5core.parquet gr-work-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: cedb12dd297cd4d7ee2f4e13fd3deadc
      size: 4446
    - path: gr-work-ratings.parquet
      md5: 0a32a0f8ded8f869f51331f8600b6761
      size: 722226759
    outs:
    - path: gr-work-ratings-5core.parquet
      md5: bfe4f929009ea67f569187304b331770
      size: 710287642
  work-actions-5core:
    cmd: python ../../run.py --rust kcore -o gr-work-actions-5core.parquet gr-work-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: cedb12dd297cd4d7ee2f4e13fd3deadc
      size: 4446
    - path: gr-work-actions.parquet
      md5: b545fd5e8f3a1cb964597b1768fe0dfe
      size: 1531350506
    outs:
    - path: gr-work-actions-5core.parquet
      md5: 4d939c1a60568c879d956678da3861a6
      size: 1522921646
  cluster-ratings-5core:
    cmd: python ../../run.py --rust kcore -o gr-cluster-ratings-5core.parquet gr-cluster-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      md5: cedb12dd297cd4d7ee2f4e13fd3deadc
      size: 4446
    - path: gr-cluster-ratings.parquet
      md5: 27f4fe36792dd6ca02a352e7f3347f44
      size: 690875231
    outs:
    - path: gr-cluster-ratings-5core.parquet
      md5: 781141502a62d3b714dbd20c0f263e17
      size: 678797204
