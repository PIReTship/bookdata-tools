schema: '2.0'
stages:
  scan-interactions:
    cmd: cargo run --release -- goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv.gz
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      hash: md5
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv.gz
      hash: md5
      md5: b62f62739f0a982fe2580282033c2c27
      size: 906091824
    - path: ../../src/cli/goodreads
      hash: md5
      md5: ce11f1d45035c404d99e7315a442a4d6.dir
      size: 12638
      nfiles: 4
    - path: ../../src/goodreads
      hash: md5
      md5: 8410919a029aca229d678e2cbe4be4ea.dir
      size: 22314
      nfiles: 10
    outs:
    - path: gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
  cluster-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 3ad88cda394f6977d712c4230f758c4a
      size: 19974288
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      hash: md5
      md5: ad24e55b4ca2fabf25c852ebf9fa7206
      size: 1115150931
  cluster-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      -o goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 3ad88cda394f6977d712c4230f758c4a
      size: 19974288
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      hash: md5
      md5: 03d70f08836642819c5470c5a078f4b5
      size: 575296325
  cluster-actions-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-actions-5core.parquet gr-cluster-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-actions.parquet
      hash: md5
      md5: ad24e55b4ca2fabf25c852ebf9fa7206
      size: 1115150931
    outs:
    - path: gr-cluster-actions-5core.parquet
      hash: md5
      md5: 582bad6dfed91e771bd7fd99a204921a
      size: 1108748294
  cluster-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-ratings-5core.parquet gr-cluster-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-ratings.parquet
      hash: md5
      md5: 03d70f08836642819c5470c5a078f4b5
      size: 575296325
    outs:
    - path: gr-cluster-ratings-5core.parquet
      hash: md5
      md5: a3a5507fc0b1a5df93e3011effc7ec17
      size: 565920910
  work-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 3ad88cda394f6977d712c4230f758c4a
      size: 19974288
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      hash: md5
      md5: 4471150ba846af08206dd65c3bc1e6ad
      size: 1155320772
  work-actions-5core:
    cmd: cargo run --release -- kcore -o gr-work-actions-5core.parquet gr-work-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-actions.parquet
      hash: md5
      md5: 4471150ba846af08206dd65c3bc1e6ad
      size: 1155320772
    outs:
    - path: gr-work-actions-5core.parquet
      hash: md5
      md5: d10f73edcdff35d3caf6892da0a3b478
      size: 1149057598
  work-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      --native-works -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 3ad88cda394f6977d712c4230f758c4a
      size: 19974288
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      hash: md5
      md5: 44fad84fe1ce223f4f81c951c766ed6e
      size: 598542704
  work-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-work-ratings-5core.parquet gr-work-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-ratings.parquet
      hash: md5
      md5: 44fad84fe1ce223f4f81c951c766ed6e
      size: 598542704
    outs:
    - path: gr-work-ratings-5core.parquet
      hash: md5
      md5: 879481295809878381c202afeabe1d84
      size: 589497693
