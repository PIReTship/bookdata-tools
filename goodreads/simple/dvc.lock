schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv
      md5: 696fbf71f0082c0b6a2379182b147c1e
      size: 4318621741
    - path: ../../src/cli/goodreads
      md5: 9a183d069c3e26425902f894cb7cf4f2.dir
      size: 12357
      nfiles: 4
    - path: ../../src/goodreads
      md5: b71b1bcda391d44638b265f72f2dd63d.dir
      size: 15726
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a77c14ec887a12bb23845991b937d6b5
      size: 19848706
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: e88c9377535f9085c0ecd1eceb49977a
      size: 8167
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      md5: d90f627cb7240afecd40a4c93cd2ad7d
      size: 1471886547
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a77c14ec887a12bb23845991b937d6b5
      size: 19848706
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: e88c9377535f9085c0ecd1eceb49977a
      size: 8167
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      md5: 8d9e40eed0256e4076bd3cbb06a6ed8f
      size: 690107994
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    outs:
    - path: gr-interactions.json
      md5: 74b4602621d42efc878cc838594bd4f4
      size: 523
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple --native-works
      -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a77c14ec887a12bb23845991b937d6b5
      size: 19848706
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: e88c9377535f9085c0ecd1eceb49977a
      size: 8167
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      md5: 54963c31e9eff969c9e51e22ca786f68
      size: 721245317
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: 54963c31e9eff969c9e51e22ca786f68
      size: 721245317
    outs:
    - path: gr-work-ratings.json
      md5: 0f224a631e3f34d972146df9e7001207
      size: 425
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 8d9e40eed0256e4076bd3cbb06a6ed8f
      size: 690107994
    outs:
    - path: gr-cluster-ratings.json
      md5: 476777056055551813e96fdcd1f6e877
      size: 424
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: d90f627cb7240afecd40a4c93cd2ad7d
      size: 1471886547
    outs:
    - path: gr-cluster-actions.json
      md5: e6845f00cb12a63253ba8afd20d73038
      size: 431
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a77c14ec887a12bb23845991b937d6b5
      size: 19848706
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: e88c9377535f9085c0ecd1eceb49977a
      size: 8167
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      md5: f88a1a308b19610646182ef5ec131b62
      size: 1528045191
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: f88a1a308b19610646182ef5ec131b62
      size: 1528045191
    outs:
    - path: gr-work-actions.json
      md5: 4e3217314f224eb5cedf92103273b0af
      size: 431
