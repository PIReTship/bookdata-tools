schema: '2.0'
stages:
  scan-interactions:
    cmd: cargo run --release -- goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv.gz
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      hash: md5
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv.gz
      hash: md5
      md5: b62f62739f0a982fe2580282033c2c27
      size: 906091824
    - path: ../../src/cli/goodreads
      hash: md5
      md5: 6325935a8eb344606761bd5a24811988.dir
      size: 12216
      nfiles: 4
    - path: ../../src/goodreads
      hash: md5
      md5: fa9aa92722a150f970aea65216aaca13.dir
      size: 16838
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
  cluster-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 86ef81e54dd715079536f439b44f3b5a
      size: 19974129
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: a53135e18945ae6ac7a960c36e19d888
      size: 7435
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      hash: md5
      md5: fe65b85d45d75986ab219879b79ff2e2
      size: 1115270478
  cluster-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      -o goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 86ef81e54dd715079536f439b44f3b5a
      size: 19974129
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: a53135e18945ae6ac7a960c36e19d888
      size: 7435
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      hash: md5
      md5: addc3a44d31c9173ab6059a70f36deb1
      size: 575300724
  cluster-actions-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-actions-5core.parquet gr-cluster-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-actions.parquet
      hash: md5
      md5: fe65b85d45d75986ab219879b79ff2e2
      size: 1115270478
    outs:
    - path: gr-cluster-actions-5core.parquet
      hash: md5
      md5: 70bbc019a336bdf038b5853e5d3257e1
      size: 1108867275
  cluster-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-ratings-5core.parquet gr-cluster-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-ratings.parquet
      hash: md5
      md5: addc3a44d31c9173ab6059a70f36deb1
      size: 575300724
    outs:
    - path: gr-cluster-ratings-5core.parquet
      hash: md5
      md5: 7d1eda4804b3eb81e820ad48e6b16c06
      size: 565897562
  work-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 86ef81e54dd715079536f439b44f3b5a
      size: 19974129
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: a53135e18945ae6ac7a960c36e19d888
      size: 7435
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      hash: md5
      md5: df250de19afa2df7161fba6cb9342ad8
      size: 1155302387
  work-actions-5core:
    cmd: cargo run --release -- kcore -o gr-work-actions-5core.parquet gr-work-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-actions.parquet
      hash: md5
      md5: df250de19afa2df7161fba6cb9342ad8
      size: 1155302387
    outs:
    - path: gr-work-actions-5core.parquet
      hash: md5
      md5: f2a94c9d87a63f0b9e560ea205405b38
      size: 1149038930
  work-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      --native-works -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 86ef81e54dd715079536f439b44f3b5a
      size: 19974129
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: a53135e18945ae6ac7a960c36e19d888
      size: 7435
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      hash: md5
      md5: 1bfe0fda97aa6a2e66efcfc1e770c3be
      size: 598546577
  work-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-work-ratings-5core.parquet gr-work-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-ratings.parquet
      hash: md5
      md5: 1bfe0fda97aa6a2e66efcfc1e770c3be
      size: 598546577
    outs:
    - path: gr-work-ratings-5core.parquet
      hash: md5
      md5: 3d65a029f7e9a252672c5c7d450b6ceb
      size: 589497272
