schema: '2.0'
stages:
  scan-interactions:
    cmd: cargo run --release -- goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv.gz
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      hash: md5
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv.gz
      hash: md5
      md5: b62f62739f0a982fe2580282033c2c27
      size: 906091824
    - path: ../../src/cli/goodreads
      hash: md5
      md5: ce11f1d45035c404d99e7315a442a4d6.dir
      size: 12638
      nfiles: 4
    - path: ../../src/goodreads
      hash: md5
      md5: 8410919a029aca229d678e2cbe4be4ea.dir
      size: 22314
      nfiles: 10
    outs:
    - path: gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
  cluster-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: b92162adb879beb3cc4c5fe0900e8658
      size: 19975042
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      hash: md5
      md5: 7a312405dd03b6e004a57b0e82e73162
      size: 930545845
  cluster-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      -o goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: b92162adb879beb3cc4c5fe0900e8658
      size: 19975042
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      hash: md5
      md5: 843e3dea1a1326c0dc726d4ce444b247
      size: 447373856
  cluster-actions-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-actions-5core.parquet gr-cluster-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-actions.parquet
      hash: md5
      md5: 7a312405dd03b6e004a57b0e82e73162
      size: 930545845
    outs:
    - path: gr-cluster-actions-5core.parquet
      hash: md5
      md5: 30a1ae95139dd1151138048391ff5e37
      size: 924628805
  cluster-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-ratings-5core.parquet gr-cluster-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-ratings.parquet
      hash: md5
      md5: 843e3dea1a1326c0dc726d4ce444b247
      size: 447373856
    outs:
    - path: gr-cluster-ratings-5core.parquet
      hash: md5
      md5: e37f7a4478f076f515066fd5f7e1127a
      size: 439010701
  work-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: b92162adb879beb3cc4c5fe0900e8658
      size: 19975042
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      hash: md5
      md5: 2b3cd47447bf27ba6dc7e34be41e8fd1
      size: 964095517
  work-actions-5core:
    cmd: cargo run --release -- kcore -o gr-work-actions-5core.parquet gr-work-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-actions.parquet
      hash: md5
      md5: 2b3cd47447bf27ba6dc7e34be41e8fd1
      size: 964095517
    outs:
    - path: gr-work-actions-5core.parquet
      hash: md5
      md5: 3952db8d8b2e6772eaf42df0d7789a9d
      size: 958450845
  work-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      --native-works -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: b92162adb879beb3cc4c5fe0900e8658
      size: 19975042
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      hash: md5
      md5: b7da15b80c333f3e389d09b3714f070f
      size: 465041449
  work-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-work-ratings-5core.parquet gr-work-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-ratings.parquet
      hash: md5
      md5: b7da15b80c333f3e389d09b3714f070f
      size: 465041449
    outs:
    - path: gr-work-ratings-5core.parquet
      hash: md5
      md5: 7603fe5755b0602ffc17158590758d52
      size: 456968325
