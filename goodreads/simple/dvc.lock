schema: '2.0'
stages:
  scan-interactions:
    cmd: cargo run --release -- goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv.gz
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      hash: md5
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv.gz
      hash: md5
      md5: b62f62739f0a982fe2580282033c2c27
      size: 906091824
    - path: ../../src/cli/goodreads
      hash: md5
      md5: ce11f1d45035c404d99e7315a442a4d6.dir
      size: 12638
      nfiles: 4
    - path: ../../src/goodreads
      hash: md5
      md5: 11f0d285522a2ea883c776b5c0653d79.dir
      size: 22154
      nfiles: 10
    outs:
    - path: gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
  cluster-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 6ba07c373272408a4543a3231ce49bb6
      size: 19974043
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      hash: md5
      md5: fae1006d650028ef446d748915ea774a
      size: 1115230586
  cluster-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      -o goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 6ba07c373272408a4543a3231ce49bb6
      size: 19974043
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      hash: md5
      md5: 4085d5bcc8285f1157728c408515ea0c
      size: 575277154
  cluster-actions-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-actions-5core.parquet gr-cluster-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-actions.parquet
      hash: md5
      md5: fae1006d650028ef446d748915ea774a
      size: 1115230586
    outs:
    - path: gr-cluster-actions-5core.parquet
      hash: md5
      md5: 11586f63af79ffa4e50786a4b361e131
      size: 1108826055
  cluster-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-cluster-ratings-5core.parquet gr-cluster-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-cluster-ratings.parquet
      hash: md5
      md5: 4085d5bcc8285f1157728c408515ea0c
      size: 575277154
    outs:
    - path: gr-cluster-ratings-5core.parquet
      hash: md5
      md5: 087e09f13c2f116ef1f8586cf34014e2
      size: 565930671
  work-actions:
    cmd: cargo run --release -- goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 6ba07c373272408a4543a3231ce49bb6
      size: 19974043
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      hash: md5
      md5: 9732ab80546b7da96d83e9c6fa9a2266
      size: 1155129449
  work-actions-5core:
    cmd: cargo run --release -- kcore -o gr-work-actions-5core.parquet gr-work-actions.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-actions.parquet
      hash: md5
      md5: 9732ab80546b7da96d83e9c6fa9a2266
      size: 1155129449
    outs:
    - path: gr-work-actions-5core.parquet
      hash: md5
      md5: f951cac5eb20680d278d986544de8715
      size: 1149110144
  work-ratings:
    cmd: cargo run --release -- goodreads cluster-interactions --ratings --simple
      --native-works -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      hash: md5
      md5: 6ba07c373272408a4543a3231ce49bb6
      size: 19974043
    - path: goodreads/simple/gr-interactions.parquet
      hash: md5
      md5: ae62f66ccbfd19929fb0d22d7e72238d
      size: 1582669060
    - path: src/cli/goodreads/cluster.rs
      hash: md5
      md5: 1e40bcc70bdcbba5fc50dc283342a621
      size: 7588
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      hash: md5
      md5: 04bd4df52605a992bec8c790b328bff2
      size: 598592081
  work-ratings-5core:
    cmd: cargo run --release -- kcore -o gr-work-ratings-5core.parquet gr-work-ratings.parquet
    deps:
    - path: ../../src/cli/kcore.rs
      hash: md5
      md5: 9a64f2beb19d2053d9c2386609beafe9
      size: 4874
    - path: gr-work-ratings.parquet
      hash: md5
      md5: 04bd4df52605a992bec8c790b328bff2
      size: 598592081
    outs:
    - path: gr-work-ratings-5core.parquet
      hash: md5
      md5: 6159366a04aa39eec88b96d00b06fa56
      size: 589532967
