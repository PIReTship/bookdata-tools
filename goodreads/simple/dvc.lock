schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv
      md5: 696fbf71f0082c0b6a2379182b147c1e
      size: 4318621741
    - path: ../../src/cli/goodreads
      md5: 2083d583e9d78e0c244d722902417157.dir
      size: 12128
      nfiles: 4
    - path: ../../src/goodreads
      md5: 3ab9ee1a190c135c3715a494abc10949.dir
      size: 16838
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 9d090e7251b2a6ea5f152322c593400b
      size: 19893179
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: 50a9230841b77e3f0b97bf6f0db7e1cf
      size: 7429
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      md5: d1442c6d319db4f0e0c17a828a52bb78
      size: 1402899663
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 9d090e7251b2a6ea5f152322c593400b
      size: 19893179
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: 50a9230841b77e3f0b97bf6f0db7e1cf
      size: 7429
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      md5: 4277e9e6e5a36b26578968036a97f17a
      size: 659092460
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    outs:
    - path: gr-interactions.json
      md5: 74b4602621d42efc878cc838594bd4f4
      size: 523
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple --native-works
      -o goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 69ca42accada2c0ecb758b95e9949752
      size: 19848712
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6566
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      md5: f6d0e95e227111148885742e62e369e0
      size: 721229630
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: f6d0e95e227111148885742e62e369e0
      size: 721229630
    outs:
    - path: gr-work-ratings.json
      md5: 0c8150ef8d2a7c9ef62b49f3d8a9edf5
      size: 425
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 3bdedbff9aed2a6921a7ceedb2b65645
      size: 690116584
    outs:
    - path: gr-cluster-ratings.json
      md5: fdaa05eb517463b39dac38963eed3463
      size: 424
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: dbb23b863330193bcf98e1c8efc98aa8
      size: 1471901033
    outs:
    - path: gr-cluster-actions.json
      md5: 0f647a9d0bb1efe6c6e10c92d3f0ff9e
      size: 431
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      --native-works -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: 69ca42accada2c0ecb758b95e9949752
      size: 19848712
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6566
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      md5: 9dd79f85bc89b6480f699e04ca90b6c0
      size: 1528011340
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: 9dd79f85bc89b6480f699e04ca90b6c0
      size: 1528011340
    outs:
    - path: gr-work-actions.json
      md5: b9b701289d37118629b3bd893f4f950e
      size: 431
