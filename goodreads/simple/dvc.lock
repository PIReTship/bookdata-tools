schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions --csv --book-map ../../data/goodreads/book_id_map.csv
      ../../data/goodreads/goodreads_interactions.csv
    deps:
    - path: ../../data/goodreads/book_id_map.csv
      md5: c4e5afd568df2f7a4a8a52f3eeb88413
      size: 37846957
    - path: ../../data/goodreads/goodreads_interactions.csv
      md5: 696fbf71f0082c0b6a2379182b147c1e
      size: 4318621741
    - path: ../../src/cli/goodreads.rs
      md5: 5783f4fd95f7c6abe0dda8b79fd40b4c
      size: 4324
    - path: ../../src/goodreads
      md5: 6c24ed0b149c0adef3b672cc519245f5.dir
      size: 19749
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-cluster-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5976
    outs:
    - path: goodreads/simple/gr-cluster-actions.parquet
      md5: 0baf9bdc60117c76f8e1c937a2da935d
      size: 1471898571
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5976
    outs:
    - path: goodreads/simple/gr-cluster-ratings.parquet
      md5: 132bf93460e21ca29e0c4dedddcc9e42
      size: 690108784
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    outs:
    - path: gr-interactions.json
      md5: 74b4602621d42efc878cc838594bd4f4
      size: 523
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --simple -o
      goodreads/simple/gr-work-ratings.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5766
    outs:
    - path: goodreads/simple/gr-work-ratings.parquet
      md5: 6eaefaa55cd41189d7ab0c4b08bba668
      size: 674849919
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: 6eaefaa55cd41189d7ab0c4b08bba668
      size: 674849919
    outs:
    - path: gr-work-ratings.json
      md5: 16e5ddf6e3aaa71cdc13e0df2386c5a7
      size: 424
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 132bf93460e21ca29e0c4dedddcc9e42
      size: 690108784
    outs:
    - path: gr-cluster-ratings.json
      md5: 66643219d0b0425fe2e8c9cfa0c9bd30
      size: 424
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: 0baf9bdc60117c76f8e1c937a2da935d
      size: 1471898571
    outs:
    - path: gr-cluster-actions.json
      md5: 172570f78975672166ec4bea9ee737ee
      size: 431
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --simple
      -o goodreads/simple/gr-work-actions.parquet
    deps:
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: goodreads/simple/gr-interactions.parquet
      md5: e01dd1692896c9ae0a2b18e94b94e5aa
      size: 1456440955
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5766
    outs:
    - path: goodreads/simple/gr-work-actions.parquet
      md5: f8df470dde737094bc3fa1a9e7e7584f
      size: 1437588839
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: f8df470dde737094bc3fa1a9e7e7584f
      size: 1437588839
    outs:
    - path: gr-work-actions.json
      md5: 75d8b09431519e3f8ecad302f352cb1a
      size: 431
