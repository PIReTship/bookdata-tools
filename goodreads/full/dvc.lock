schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions ../../data/goodreads/goodreads_interactions.json.gz
    deps:
    - path: ../../data/goodreads/goodreads_interactions.json.gz
      md5: f2d054a85f33d405a9bff6933005ba89
      size: 9388113365
    - path: ../../src/cli/goodreads
      md5: 81d7a948aff94ca6cfdd11752f66770f.dir
      size: 10964
      nfiles: 4
    - path: ../../src/goodreads
      md5: 2365b11eeb1e1dd8d4a5f5287cb4876f.dir
      size: 13755
      nfiles: 6
    outs:
    - path: gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: gr-users.parquet
      md5: ff0d06650a9944bf80cc8c4a99827c1d
      size: 18683237
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    outs:
    - path: gr-interactions.json
      md5: 9b3af7db2bcd5cb7616d6f0a17daefb4
      size: 990
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions --native-works
      -o goodreads/full/gr-work-actions.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: b6535611367902d74cd2dd2304bf6450
      size: 19779210
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/full/gr-work-actions.parquet
      md5: 5a7f65dcbb6ba32d44121077ff1908c3
      size: 3006141050
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: 5a7f65dcbb6ba32d44121077ff1908c3
      size: 3006141050
    outs:
    - path: gr-work-actions.json
      md5: 4887316ff9d027441199de51203b682f
      size: 614
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings -o goodreads/full/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: 3666e134e64d7aefd31594cce588f55b
      size: 19837145
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/full/gr-cluster-ratings.parquet
      md5: 6bfa291f6dc79203a95d1af6898b8540
      size: 1406031904
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: 6bfa291f6dc79203a95d1af6898b8540
      size: 1406031904
    outs:
    - path: gr-cluster-ratings.json
      md5: 56624d67d0113e20188ee89559c4b017
      size: 703
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions -o goodreads/full/gr-cluster-actions.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: b6535611367902d74cd2dd2304bf6450
      size: 19779210
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/full/gr-cluster-actions.parquet
      md5: cab09e7414755e40d15b19f80acb4d31
      size: 2900533269
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: cab09e7414755e40d15b19f80acb4d31
      size: 2900533269
    outs:
    - path: gr-cluster-actions.json
      md5: 85c0a09788a85e5934204538e3c26282
      size: 614
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings --native-works
      -o goodreads/full/gr-work-ratings.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: 3666e134e64d7aefd31594cce588f55b
      size: 19837145
    - path: src/cli/goodreads/cluster.rs
      md5: fe94c4e67de7e96783ff948dc8943352
      size: 6817
    outs:
    - path: goodreads/full/gr-work-ratings.parquet
      md5: e6f5a2bc3957bba5f6f5531746f9be62
      size: 1471946379
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: e6f5a2bc3957bba5f6f5531746f9be62
      size: 1471946379
    outs:
    - path: gr-work-ratings.json
      md5: 31aa53f864e693f5ed5c32764a3d9b24
      size: 704
  schema@gr-users:
    cmd: python ../../run.py --rust pq-info -o gr-users.json gr-users.parquet
    deps:
    - path: gr-users.parquet
      md5: ff0d06650a9944bf80cc8c4a99827c1d
      size: 18683237
    outs:
    - path: gr-users.json
      md5: 70a463f659828f45949b5288557788f7
      size: 244
