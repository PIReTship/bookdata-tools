schema: '2.0'
stages:
  scan-interactions:
    cmd: python ../../run.py --rust goodreads scan interactions ../../data/goodreads/goodreads_interactions.json.gz
    deps:
    - path: ../../data/goodreads/goodreads_interactions.json.gz
      md5: f2d054a85f33d405a9bff6933005ba89
      size: 9388113365
    - path: ../../src/cli/goodreads.rs
      md5: 5783f4fd95f7c6abe0dda8b79fd40b4c
      size: 4170
    - path: ../../src/goodreads
      md5: 6c24ed0b149c0adef3b672cc519245f5.dir
      size: 19043
      nfiles: 7
    outs:
    - path: gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: gr-users.parquet
      md5: ff0d06650a9944bf80cc8c4a99827c1d
      size: 18683237
  schema@gr-interactions:
    cmd: python ../../run.py --rust pq-info -o gr-interactions.json gr-interactions.parquet
    deps:
    - path: gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    outs:
    - path: gr-interactions.json
      md5: 9b3af7db2bcd5cb7616d6f0a17daefb4
      size: 990
  work-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions -o goodreads/full/gr-work-actions.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5766
    outs:
    - path: goodreads/full/gr-work-actions.parquet
      md5: acfc30821bc58860dbefbf1c27d524f4
      size: 2863568728
  schema@gr-work-actions:
    cmd: python ../../run.py --rust pq-info -o gr-work-actions.json gr-work-actions.parquet
    deps:
    - path: gr-work-actions.parquet
      md5: acfc30821bc58860dbefbf1c27d524f4
      size: 2863568728
    outs:
    - path: gr-work-actions.json
      md5: bb20d274e4b4d05203ab29dfb29dfd4f
      size: 614
  cluster-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings -o goodreads/full/gr-cluster-ratings.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5766
    outs:
    - path: goodreads/full/gr-cluster-ratings.parquet
      md5: ba876892e9e3171977a690bd09d82d1f
      size: 1388394520
  schema@gr-cluster-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-ratings.json gr-cluster-ratings.parquet
    deps:
    - path: gr-cluster-ratings.parquet
      md5: ba876892e9e3171977a690bd09d82d1f
      size: 1388394520
    outs:
    - path: gr-cluster-ratings.json
      md5: e2dbc7c86aa1760215b4596f80e84c8d
      size: 703
  cluster-actions:
    cmd: python run.py --rust goodreads cluster-interactions --add-actions -o goodreads/full/gr-cluster-actions.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5766
    outs:
    - path: goodreads/full/gr-cluster-actions.parquet
      md5: f0e7252205e5952380163b85d7aff0d3
      size: 2863605473
  schema@gr-cluster-actions:
    cmd: python ../../run.py --rust pq-info -o gr-cluster-actions.json gr-cluster-actions.parquet
    deps:
    - path: gr-cluster-actions.parquet
      md5: f0e7252205e5952380163b85d7aff0d3
      size: 2863605473
    outs:
    - path: gr-cluster-actions.json
      md5: 1ce4b6e1b26c4b8acd90b56ec0bcc47f
      size: 614
  work-ratings:
    cmd: python run.py --rust goodreads cluster-interactions --ratings -o goodreads/full/gr-work-ratings.parquet
    deps:
    - path: goodreads/full/gr-interactions.parquet
      md5: 9788655b2499eb8150398f8c1558e823
      size: 4372045343
    - path: goodreads/gr-book-link.parquet
      md5: a8fbe0288a2682a983fe9550e500ad93
      size: 20310729
    - path: src/goodreads/cluster.rs
      md5: 6036d46b3e2918f29bf6492c68d25cfa
      size: 5766
    outs:
    - path: goodreads/full/gr-work-ratings.parquet
      md5: 035b90160030c387ed760b47d3555a7d
      size: 1388413385
  schema@gr-work-ratings:
    cmd: python ../../run.py --rust pq-info -o gr-work-ratings.json gr-work-ratings.parquet
    deps:
    - path: gr-work-ratings.parquet
      md5: 035b90160030c387ed760b47d3555a7d
      size: 1388413385
    outs:
    - path: gr-work-ratings.json
      md5: bb27eb89ec23f08b9605851c20fb0ed7
      size: 703
  schema@gr-users:
    cmd: python ../../run.py --rust pq-info -o gr-users.json gr-users.parquet
    deps:
    - path: gr-users.parquet
      md5: ff0d06650a9944bf80cc8c4a99827c1d
      size: 18683237
    outs:
    - path: gr-users.json
      md5: 70a463f659828f45949b5288557788f7
      size: 244
