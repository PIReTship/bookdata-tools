stages:
  scan-books:
    cmd: python ../run.py --rust scan-marc-books --glob "../data/loc-books/BooksAll.2016*.xml.gz"
    deps:
    - ../src/bin/scan-marc-books.rs
    - ../data/loc-books
    outs:
    - book-fields.parquet
    - book-ids.parquet
    - book-isbns.csv.gz

  book-authors:
    cmd: python ../run.py --rust fusion book-authors.toml
    deps:
    - book-authors.toml
    - book-authors.sql
    - book-fields.parquet
    outs:
    - book-authors.parquet
