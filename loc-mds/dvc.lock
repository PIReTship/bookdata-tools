schema: '2.0'
stages:
  scan-books:
    cmd: python ../run.py --rust scan-marc --book-mode --glob "../data/loc-books/BooksAll.2016*.xml.gz"
    deps:
    - path: ../data/loc-books
      md5: 1b1e7ab1d98cc81e373dfc53345d4bb7.dir
      size: 3129774145
      nfiles: 43
    - path: ../src/cli/scan_marc.rs
      md5: a4251844d7e739d990d1451764982b79
      size: 3583
    - path: ../src/marc
      md5: 9e2f84ad044ead81787970f73d1eb438.dir
      size: 16793
      nfiles: 5
    outs:
    - path: book-fields.parquet
      md5: f87417b80024f7b03c53b1d7a4518c4d
      size: 3097075045
    - path: book-ids.parquet
      md5: cb26ddb248b9e595577c20b9fca13e4d
      size: 64879592
    - path: book-isbns.parquet
      md5: 0f6f3e5cae82b390c43451040916c087
      size: 54350954
  book-authors:
    cmd: python ../run.py --rust fusion book-authors.tcl
    deps:
    - path: book-authors.tcl
      md5: 76dd9093a7e1610f34513c447a92ba58
      size: 245
    - path: book-fields.parquet
      md5: f87417b80024f7b03c53b1d7a4518c4d
      size: 3097075045
    outs:
    - path: book-authors.parquet
      md5: 4cdf63248f24c8cabe7ddf8aed74547c
      size: 103944306
  scan-names:
    cmd: python ../run.py --rust scan-marc --glob "../data/loc-names/Names.2016*.xml.gz"
      -o name-fields.parquet
    deps:
    - path: ../data/loc-names
      md5: fc488a8775561070cced774803fe0d72.dir
      size: 1410755359
      nfiles: 40
    - path: ../src/cli/scan_marc.rs
      md5: a4251844d7e739d990d1451764982b79
      size: 3583
    - path: ../src/marc
      md5: 9e2f84ad044ead81787970f73d1eb438.dir
      size: 16793
      nfiles: 5
    outs:
    - path: name-fields.parquet
      md5: 778fa1cd1b70f187c041384a4b5f1373
      size: 1544394045
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: 29c68172aa2a10d6054b73656c21567c
      size: 186
    - path: name-fields.parquet
      md5: 778fa1cd1b70f187c041384a4b5f1373
      size: 1544394045
    outs:
    - path: author-names.csv.gz
      md5: a3ea12839719a6d1aba9717180c16d7b
      size: 87098867
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 58abbe4a110eb782450d9db0e461e087
      size: 190
    - path: name-fields.parquet
      md5: 778fa1cd1b70f187c041384a4b5f1373
      size: 1544394045
    outs:
    - path: author-genders.csv.gz
      md5: cc7822e579acb70ede2a3b8b430dfd09
      size: 1460659
  book-isbn-ids:
    cmd: python ../run.py --rust fusion book-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: 9a7e56c4625f5ff3d20d9aa9474b0158
      size: 268756905
    - path: book-isbn-ids.tcl
      md5: 3633693602c7d0045687c23cb45b92e2
      size: 194
    - path: book-isbns.parquet
      md5: 0f6f3e5cae82b390c43451040916c087
      size: 54350954
    outs:
    - path: book-isbn-ids.parquet
      md5: 470487ca861b3764ff408b99cd558287
      size: 51725014
  loc-clusters:
    cmd: python ../run.py --rust fusion loc-clusters.tcl
    deps:
    - path: ../book-links/cluster-graph-nodes.parquet
      md5: b313a3946566668ef89cf88029e5e9f8
      size: 681044431
    - path: loc-clusters.tcl
      md5: 31716e72f6d58f047ea391109be5d806
      size: 221
    outs:
    - path: loc-clusters.parquet
      md5: f302777c9ee19eff6def5537ab7c7471
      size: 35756676
