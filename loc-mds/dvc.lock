schema: '2.0'
stages:
  scan-books:
    cmd: python ../run.py --rust scan-marc --book-mode --glob "../data/loc-books/BooksAll.2016*.xml.gz"
    deps:
    - path: ../data/loc-books
      md5: 1b1e7ab1d98cc81e373dfc53345d4bb7.dir
      size: 3129774145
      nfiles: 43
    - path: ../src/bin/scan-marc
      md5: 71159598863602bab1f76664ef699ba5.dir
      size: 7117
      nfiles: 3
    outs:
    - path: book-fields.parquet
      md5: d952cbe153dde19859972feddbe4bb22
      size: 2919234329
    - path: book-ids.parquet
      md5: 0ecabde21c8cdcf31093ff10e6cc3dfb
      size: 73155576
    - path: book-isbns.parquet
      md5: 0758835c519af8c8596f56c3c04cdc5d
      size: 61305538
  book-authors:
    cmd: python ../run.py --rust fusion book-authors.tcl
    deps:
    - path: book-authors.tcl
      md5: 76dd9093a7e1610f34513c447a92ba58
      size: 245
    - path: book-fields.parquet
      md5: d952cbe153dde19859972feddbe4bb22
      size: 2919234329
    outs:
    - path: book-authors.parquet
      md5: 53994fff1611fe0429b81883e0439b0e
      size: 125793481
  scan-names:
    cmd: python ../run.py --rust scan-marc --glob "../data/loc-names/Names.2016*.xml.gz"
      -o name-fields.parquet
    deps:
    - path: ../data/loc-names
      md5: fc488a8775561070cced774803fe0d72.dir
      size: 1410755359
      nfiles: 40
    - path: ../src/bin/scan-marc
      md5: 797f3c50607fbba52ac2dc3b4eb2b133.dir
      size: 7102
      nfiles: 3
    outs:
    - path: name-fields.parquet
      md5: ab2d68742778f5b48121cb1c3ffb6740
      size: 1485894735
  author-names:
    cmd: python ../run.py --rust fusion author-names.tcl
    deps:
    - path: author-names.tcl
      md5: 29c68172aa2a10d6054b73656c21567c
      size: 193
    - path: name-fields.parquet
      md5: ab2d68742778f5b48121cb1c3ffb6740
      size: 1485894735
    outs:
    - path: author-names.csv.gz
      md5: f495008113fb1ffa1c188aec77343e5a
      size: 87274346
  author-genders:
    cmd: python ../run.py --rust fusion author-genders.tcl
    deps:
    - path: author-genders.tcl
      md5: 58abbe4a110eb782450d9db0e461e087
      size: 197
    - path: name-fields.parquet
      md5: ab2d68742778f5b48121cb1c3ffb6740
      size: 1485894735
    outs:
    - path: author-genders.csv.gz
      md5: faccd4a046601777c7776a171f91cd52
      size: 1468374
  book-isbn-ids:
    cmd: python ../run.py --rust fusion book-isbn-ids.tcl
    deps:
    - path: ../book-links/all-isbns.parquet
      md5: c71c5aeed40ab614d5e7151d8aab98c7
      size: 151834746
    - path: book-isbn-ids.tcl
      md5: 3633693602c7d0045687c23cb45b92e2
      size: 194
    - path: book-isbns.parquet
      md5: 0758835c519af8c8596f56c3c04cdc5d
      size: 61305538
    outs:
    - path: book-isbn-ids.parquet
      md5: 28c1c98a1f9f76c1f345cd528463391b
      size: 70030559
  loc-clusters:
    cmd: python ../run.py --rust fusion loc-clusters.tcl
    deps:
    - path: ../book-links/cluster-codes.parquet
      md5: 4e95b48d725cbf6b2e907f6f4fcc5919
      size: 552510575
    - path: loc-clusters.tcl
      md5: b9202d00b5f4dd0605a6f706018b4d6b
      size: 215
    outs:
    - path: loc-clusters.parquet
      md5: 8a99ca97eeb582f9461a5e906938b129
      size: 34554806
